{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/views/Home.vue?782a","webpack:///./src/App.vue?e045","webpack:///./src/App.vue","webpack:///./src/views/Home.vue?0dbe","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?493c","webpack:///./src/views/Home.vue","webpack:///./src/router/index.js","webpack:///./src/main.js","webpack:///./src/App.vue?c650","webpack:///./src/core/helpers.js","webpack:///external \"Vue\"","webpack:///./src/core/Storage.js","webpack:///./src/core/enums.js","webpack:///./src/core/Painter.js","webpack:///./src/core/Handler.js","webpack:///./src/core/animation/easing.js","webpack:///./src/core/animation/Clip.js","webpack:///./src/core/animation/Animator.js","webpack:///./src/core/animation/Animation.js","webpack:///./src/core/Root.js","webpack:///./src/core/Eventful.js","webpack:///./src/core/mixins/Child.js","webpack:///./src/core/mixins/Animatable.js","webpack:///./src/core/mixins/Draggable.js","webpack:///./src/core/Element.js","webpack:///./src/core/elements/BaseArrow.js","webpack:///./src/core/elements/impl/ArrowSvg.js","webpack:///./src/core/mixins/BaseLinkable.js","webpack:///./src/core/mixins/PolylineLinkable.js","webpack:///./src/core/mixins/LineLinkable.js","webpack:///./src/core/mixins/Container.js","webpack:///./src/core/mixins/Resizable.js","webpack:///./src/core/elements/BaseRect.js","webpack:///./src/core/elements/impl/RectSvg.js","webpack:///./src/core/elements/BaseVertex.js","webpack:///./src/core/mixins/CircleImplSvg.js","webpack:///./src/core/elements/impl/VertexSvg.js","webpack:///./src/core/elements/BaseCircle.js","webpack:///./src/core/mixins/CircleImplZR.js","webpack:///./src/core/elements/impl/CircleSvg.js","webpack:///./src/core/elements/BaseLinkLine.js","webpack:///./src/core/elements/BaseLine.js","webpack:///./src/core/elements/impl/helpers.js","webpack:///./src/core/elements/impl/LineSvg.js","webpack:///./src/core/elements/BasePolyline.js","webpack:///./src/core/elements/impl/PolylineSvg.js","webpack:///./src/core/elements/impl/TextSvg.js","webpack:///./src/core/createElement.js","webpack:///./src/core/configurable.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","component","staticClass","nativeOn","$event","handleDragstart","_v","on","handleStartDrawPolyLine","handleStartDrawLine","handleStartFocus","handleClearHandler","handleSave","ref","preventDefault","directives","rawName","expression","style","stopPropagation","_l","item","index","handler","_s","handleSureSub","label","panelVisible","form","prop","fieldTypeEnum","text","model","callback","$$v","$set","number","select","staticStyle","_e","dataList","slot","handleSure","subVisible","subIndex","contextmenu","freeze","JSON","parse","localStorage","getItem","items","subTypeOptions","mounted","root","el","$refs","startFocus","addEventListener","handleDrop","handleContextmenu","methods","platform","x","offsetX","y","offsetY","onCreated","log","onMounted","onUnmount","element","mount","startDrawPolyLine","startDrawLine","clearHandler","setItem","stringify","curElement","attr","left","top","curEvent","immediateMount","isDialog","addChild","Vue","use","VueRouter","routes","path","Home","router","config","productionTip","render","h","App","$mount","mixin","source","overlay","defaults","extend","subClass","superClass","subPrototype","constructor","writable","configurable","eachObj","setPrototypeOf","guid","replace","Math","random","v","toString","lastItem","list","obj","__proto__","fn","makeMap","map","forEach","fixZrCoordinate","createSvgNode","qualifiedName","createElementNS","handleKeyEvent","handles","cb","curHandler","isFunction","ctrlKey","altKey","modifiers","ctrl","alt","Storage","elementList","elementMap","Map","add","set","id","remove","idx","findIndex","delete","getElementById","getElementList","typeEnum","rect","circle","vertex","polyline","line","arrow","platformEnum","dom","zr","svg","rootStateEnum","off","focus","drawLine","drawPolyLine","Painter","clientWidth","clientHeight","cssText","svgRoot","svgZIndexMap","svgZIndex","HandlerProxy","storage","typeMap","domRoot","zrRoot","zIndex","g","preZIndex","find","insertBefore","sort","handlerMap","wrappedHandler","size","addElement","removeElement","easing","linear","k","quadraticIn","quadraticOut","quadraticInOut","cubicIn","cubicOut","cubicInOut","quarticIn","quarticOut","quarticInOut","quinticIn","quinticOut","quinticInOut","sinusoidalIn","cos","PI","sinusoidalOut","sin","sinusoidalInOut","exponentialIn","pow","exponentialOut","exponentialInOut","circularIn","sqrt","circularOut","circularInOut","elasticIn","a","asin","elasticOut","elasticInOut","backIn","backOut","backInOut","bounceIn","bounceOut","bounceInOut","Clip","options","_target","_life","life","_delay","delay","_initialized","loop","gap","onframe","ondestroy","onrestart","_pausedTime","_paused","defaultGetter","defaultSetter","Animator","setter","_tracks","_loop","_getter","_setter","_clipCount","_doneList","_onframeList","_clipList","interpolateNumber","p0","p1","percent","createTrackClip","animator","oneTrackDone","keyframes","propName","forceAnimate","trackLen","trackMaxTime","b","time","kfPercents","kfValues","prevValue","isAllValueEqual","lastValue","isNaN","start","w","lastFrame","lastFramePercent","frame","min","range","clip","Animation","stage","_clips","_running","_time","_pauseStart","Root","opts","oncontextmenu","painter","handlerProxy","state","curResizeElement","curDrawLine","isNewPoint","animation","step","globalTime","deltaTime","_startTime","easingFunc","easingFuncs","schedule","fire","restart","_needsRemove","remainder","eventType","arg","pause","resume","when","props","tracks","during","isPaused","_doneCallback","doneList","len","lastClip","self","clipCount","addClip","oldOnFrame","stop","forwardToLast","clipList","removeClip","done","getClips","addAnimator","clips","indexOf","removeAnimator","_update","Date","getTime","delta","deferredEvents","deferredClips","pop","_startLoop","requestAnimationFrame","clear","isFinished","animate","addResize","addDrag","addDrawLine","addDrawPolyLine","removeMove","removeResize","removeDrawLinkLine","endDrawLine","endElementFocus","handleKeydown","updateByKeydown","handleBlur","onblur","removeEventListener","export","width","height","elements","parent","filter","Boolean","flushRectLineRelation","isLinkLine","startElement","startId","lines","endElement","endId","Eventful","onDOM","makeEventPacket","offDOM","onZR","offZR","layerX","layerY","Child","parentOffsetX","parentOffsetY","addToParent","updateOffset","isMounted","removeFromParent","syncWithParent","Animatable","animators","animateTo","animatable","reverse","stopAnimation","animateToShallow","count","objShallow","propertyCount","setAttrByPath","animateFrom","Draggable","Element","ArrowUp","ArrowRight","ArrowDown","ArrowLeft","Delete","unmount","BaseArrow","ArrowSvg","fixArrowCenter","rotation","dragOffsetX","dragOffsetY","mousedown","button","ondragstart","mousemove","ondrag","mouseup","extData","customData","update","mapToView","fill","asyncWithLine","last","points","makeRotation","makePoints","join","tan","BaseLinkable","clickToStart","makeLinkLine","makeBeforeBreakPoints","startSin","startCos","clickToEnd","makeDirectionPoints","last2","endPoint","makeLineEndPoint","offCurDrawLine","point","makeAfterBreakPoints","endSin","endCos","PolylineLinkable","LineLinkable","Container","children","Resizable","vertexes","BaseRect","makeRectVertexes","halfW","halfH","makeLineVertexByAngle","centerX","centerY","r1","abs","r2","makeLineStartPoint","er","point1","point2","calcLineCross","center","x1","y1","x2","y2","cross1","cross2","cross3","cross4","resizeRectLT","resizeRectT","resizeRectRT","resizeRectR","resizeRectRB","resizeRectB","resizeRectLB","resizeRectL","RectSvg","setShape","BaseVertex","CircleImplSvg","VertexSvg","BaseCircle","a2","b1","x11","y11","x22","y22","resizeT","resizeR","resizeB","resizeL","addDrawLinkLine","click","lineDrawing","clickRoot","drawKeyDown","keyCtrlDrawing","updateLines","isFollowStart","focusIndex","updatePoint","removeLine","clearLine","isCurLineVertical","isContainer","child","addVertexes","onfocus","insertVertex","syncWidthVertex","updateShapeByVertex","updateVertexes","hasImage","image","cursor","preview","rectEl","toggleImage","foreignObjectElement","div","overflow","domHost","imageEl","borderWidth","circleEl","clipCircle","defs","clipPath","CircleImplZR","makeCircleShape","cx","cy","makeImageStyle","CircleSvg","BaseLinkLine","calcRotation","p2","atan2","newStart","newEnd","BaseLine","createAnimateNode","animateNode","animateMotion","makeAnimatePath","LineSvg","BasePolyline","nextVertexFollow","first","isRightVertical","isLeftVertical","breakSection","curIndex","isSectionVertical","halfY","insertPoints","halfX","focusPoint","calcCrossIndex","curPoint","curDistance","Infinity","calcDistance","distance","vAB","vAP","vBP","dotAB_AP","dotAB_BP","updateSection","leftPoint","isVertical","rightPoint","mergeBreakPoints","equalsCountX","equalsCountY","PolylineSvg","fixCoordinate","TextSvg","ZRCircle","shape","lineWidth","stroke","fontSize","textFill","ZRImage","setClipPath","setStyle","useArrow","addArrow","removeArrow","end","z","modifier","color","lineEl","polylineEl","tspan","textContent","implList","Constructor","typeConstructorMap","structRender","structure","elementBaseItems","rectBaseItems","circleBaseItems","lineBaseItems","textBaseItems","configurableList","configurableMap","makeConfiguration","Number"],"mappings":"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","file":"js/app.61fb7eed.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({\"about\":\"about\"}[chunkId]||chunkId) + \".\" + {\"about\":\"ce617dcc\",\"chunk-1c9e7d6c\":\"178295bf\",\"chunk-2d0d631a\":\"1ba35eba\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"about\":1,\"chunk-1c9e7d6c\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({\"about\":\"about\"}[chunkId]||chunkId) + \".\" + {\"about\":\"f710979c\",\"chunk-1c9e7d6c\":\"543e49d0\",\"chunk-2d0d631a\":\"31d6cfe0\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=5fd8411e&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=e8d73d4e&\"\nvar script = {}\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"header\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"draggable\":\"true\"},nativeOn:{\"dragstart\":function($event){return _vm.handleDragstart('rect', 'svg')}}},[_vm._v(\"矩形\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"draggable\":\"true\"},nativeOn:{\"dragstart\":function($event){return _vm.handleDragstart('circle', 'svg')}}},[_vm._v(\"圆\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"draggable\":\"true\"},nativeOn:{\"dragstart\":function($event){return _vm.handleDragstart('text', 'svg')}}},[_vm._v(\"文字\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.handleStartDrawPolyLine}},[_vm._v(\"折线\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.handleStartDrawLine}},[_vm._v(\"直线\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.handleStartFocus}},[_vm._v(\"选择\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.handleClearHandler}},[_vm._v(\"配置\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.handleSave}},[_vm._v(\"保存\")])],1),_c('div',{staticClass:\"bottom\"},[_c('div',{ref:\"root\",staticClass:\"root\",on:{\"dragover\":function($event){$event.preventDefault();}}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.style),expression:\"style\"}],staticClass:\"contextmenu\",style:(_vm.style),on:{\"click\":function($event){$event.stopPropagation();}}},[_vm._l((_vm.contextmenu),function(item,index){return _c('div',{key:'a' + index,on:{\"click\":item.handler}},[_vm._v(_vm._s(item.name))])}),_vm._l((_vm.subTypeOptions),function(item,index){return _c('div',{key:'b' + index,on:{\"click\":function($event){return _vm.handleSureSub(item)}}},[_vm._v(_vm._s(item.label))])})],2)]),_c('el-dialog',{attrs:{\"title\":\"配置元素\",\"visible\":_vm.panelVisible,\"width\":\"400px\",\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.panelVisible=$event}}},[_c('el-form',{attrs:{\"size\":\"mini\"}},[_vm._l((_vm.form.items),function(item){return _c('el-form-item',{key:item.prop,attrs:{\"label\":item.label}},[(item.type === _vm.fieldTypeEnum.text)?_c('el-input',{model:{value:(item.value),callback:function ($$v) {_vm.$set(item, \"value\", $$v)},expression:\"item.value\"}}):(item.type === _vm.fieldTypeEnum.number)?_c('el-input',{attrs:{\"type\":\"number\"},model:{value:(item.value),callback:function ($$v) {_vm.$set(item, \"value\", $$v)},expression:\"item.value\"}}):(item.type === _vm.fieldTypeEnum.select)?_c('el-select',{staticStyle:{\"width\":\"100%\"},model:{value:(item.value),callback:function ($$v) {_vm.$set(item, \"value\", $$v)},expression:\"item.value\"}},_vm._l((item.options),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.label,\"value\":item.value}})}),1):_vm._e()],1)}),_c('div',{staticClass:\"sub-title\"},[_c('span',[_vm._v(\"自定义数据\")]),_c('el-button',{staticClass:\"icon-btn\",attrs:{\"type\":\"primary\",\"size\":\"mini\",\"icon\":\"el-icon-plus\"},on:{\"click\":function($event){return _vm.form.dataList.push({})}}})],1),_vm._l((_vm.form.dataList),function(item,index){return _c('div',{key:index,staticClass:\"data-item\"},[_c('el-form-item',{attrs:{\"label\":\"key\"}},[_c('el-input',{model:{value:(item.key),callback:function ($$v) {_vm.$set(item, \"key\", $$v)},expression:\"item.key\"}})],1),_c('el-form-item',{attrs:{\"label\":\"value\"}},[_c('el-input',{model:{value:(item.value),callback:function ($$v) {_vm.$set(item, \"value\", $$v)},expression:\"item.value\"}})],1),_c('div',{staticClass:\"remove-btn\"},[_c('el-button',{staticClass:\"icon-btn\",attrs:{\"type\":\"primary\",\"size\":\"mini\",\"icon\":\"el-icon-minus\"},on:{\"click\":function($event){return _vm.form.dataList.splice(index, 1)}}})],1)],1)})],2),_c('template',{slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){_vm.panelVisible = false}}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":_vm.handleSure}},[_vm._v(\"确定\")])],1)],2),_c('el-dialog',{attrs:{\"title\":\"添加子元素\",\"visible\":_vm.subVisible,\"width\":\"240px\",\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.subVisible=$event}}},[_c('el-form',{attrs:{\"size\":\"mini\"}},[_c('el-form-item',{attrs:{\"label\":\"子元素类型\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},model:{value:(_vm.subIndex),callback:function ($$v) {_vm.subIndex=$$v},expression:\"subIndex\"}},_vm._l((_vm.subTypeOptions),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.label,\"value\":index}})}),1)],1)],1),_c('template',{slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){_vm.subVisible = false}}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":_vm.handleSureSub}},[_vm._v(\"确定\")])],1)],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div class=\"header\">\r\n      <!--      <el-button type=\"primary\" size=\"small\" draggable=\"true\" @dragstart.native=\"handleDragstart('rect', 'dom')\">DOM矩形</el-button>-->\r\n      <!--      <el-button type=\"primary\" size=\"small\" draggable=\"true\" @dragstart.native=\"handleDragstart('rect', 'zr')\">CANVAS矩形</el-button>-->\r\n      <el-button type=\"primary\" size=\"small\" draggable=\"true\" @dragstart.native=\"handleDragstart('rect', 'svg')\">矩形</el-button>\r\n      <!--      <el-button type=\"primary\" size=\"small\" draggable=\"true\" @dragstart.native=\"handleDragstart('circle', 'dom')\">DOM圆</el-button>-->\r\n      <!--      <el-button type=\"primary\" size=\"small\" draggable=\"true\" @dragstart.native=\"handleDragstart('circle', 'zr')\">CANVAS圆</el-button>-->\r\n      <el-button type=\"primary\" size=\"small\" draggable=\"true\" @dragstart.native=\"handleDragstart('circle', 'svg')\">圆</el-button>\r\n      <el-button type=\"primary\" size=\"small\" draggable=\"true\" @dragstart.native=\"handleDragstart('text', 'svg')\">文字</el-button>\r\n      <el-button type=\"primary\" size=\"small\" @click=\"handleStartDrawPolyLine\">折线</el-button>\r\n      <el-button type=\"primary\" size=\"small\" @click=\"handleStartDrawLine\">直线</el-button>\r\n      <el-button type=\"primary\" size=\"small\" @click=\"handleStartFocus\">选择</el-button>\r\n      <el-button type=\"primary\" size=\"small\" @click=\"handleClearHandler\">配置</el-button>\r\n      <el-button type=\"primary\" size=\"small\" @click=\"handleSave\">保存</el-button>\r\n    </div>\r\n    <div class=\"bottom\">\r\n      <div class=\"root\" ref=\"root\" @dragover.prevent></div>\r\n      <div class=\"contextmenu\" :style=\"style\" v-show=\"style\" @click.stop>\r\n        <div v-for=\"(item, index) in contextmenu\" :key=\"'a' + index\" @click=\"item.handler\">{{ item.name }}</div>\r\n        <div v-for=\"(item, index) in subTypeOptions\" :key=\"'b' + index\" @click=\"handleSureSub(item)\">{{ item.label }}</div>\r\n      </div>\r\n    </div>\r\n    <el-dialog title=\"配置元素\" :visible.sync=\"panelVisible\" width=\"400px\" :close-on-click-modal=\"false\">\r\n      <el-form size=\"mini\">\r\n        <el-form-item v-for=\"item in form.items\" :key=\"item.prop\" :label=\"item.label\">\r\n          <el-input v-model=\"item.value\" v-if=\"item.type === fieldTypeEnum.text\" />\r\n          <el-input v-model=\"item.value\" v-else-if=\"item.type === fieldTypeEnum.number\" type=\"number\" />\r\n          <el-select v-model=\"item.value\" v-else-if=\"item.type === fieldTypeEnum.select\" style=\"width: 100%;\">\r\n            <el-option v-for=\"(item, index) in item.options\" :key=\"index\" :label=\"item.label\" :value=\"item.value\" />\r\n          </el-select>\r\n        </el-form-item>\r\n        <div class=\"sub-title\">\r\n          <span>自定义数据</span>\r\n          <el-button class=\"icon-btn\" type=\"primary\" size=\"mini\" @click=\"form.dataList.push({})\" icon=\"el-icon-plus\"></el-button>\r\n        </div>\r\n        <div v-for=\"(item, index) in form.dataList\" :key=\"index\" class=\"data-item\">\r\n          <el-form-item label=\"key\">\r\n            <el-input v-model=\"item.key\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"value\">\r\n            <el-input v-model=\"item.value\" />\r\n          </el-form-item>\r\n          <div class=\"remove-btn\">\r\n            <el-button class=\"icon-btn\" type=\"primary\" size=\"mini\" @click=\"form.dataList.splice(index, 1)\" icon=\"el-icon-minus\"></el-button>\r\n          </div>\r\n        </div>\r\n      </el-form>\r\n      <template slot=\"footer\">\r\n        <el-button size=\"mini\" @click=\"panelVisible = false\">取消</el-button>\r\n        <el-button size=\"mini\" type=\"primary\" @click=\"handleSure\">确定</el-button>\r\n      </template>\r\n    </el-dialog>\r\n    <el-dialog title=\"添加子元素\" :visible.sync=\"subVisible\" width=\"240px\" :close-on-click-modal=\"false\">\r\n      <el-form size=\"mini\">\r\n        <el-form-item label=\"子元素类型\">\r\n          <el-select v-model=\"subIndex\" style=\"width: 100%;\">\r\n            <el-option v-for=\"(item, index) in subTypeOptions\" :key=\"index\" :label=\"item.label\" :value=\"index\" />\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-form>\r\n      <template slot=\"footer\">\r\n        <el-button size=\"mini\" @click=\"subVisible = false\">取消</el-button>\r\n        <el-button size=\"mini\" type=\"primary\" @click=\"handleSureSub\">确定</el-button>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Root, createElement, structRender, rootStateEnum, configurableMap, fieldTypeEnum, makeConfiguration, typeEnum, platformEnum } from \"../core\";\r\nimport { eachObj, makeMap } from \"../core/helpers\";\r\n\r\nexport default {\r\n  name: \"Home\",\r\n  data() {\r\n    return {\r\n      contextmenu: [],\r\n      style: null,\r\n      data: Object.freeze(JSON.parse(localStorage.getItem(\"data\"))),\r\n      panelVisible: false,\r\n      form: {\r\n        items: [],\r\n        dataList: []\r\n      },\r\n      fieldTypeEnum: Object.freeze(fieldTypeEnum),\r\n      subVisible: false,\r\n      subTypeOptions: [\r\n        { label: \"矩形\", type: typeEnum.rect, platform: platformEnum.svg, isDialog: false },\r\n        { label: \"弹窗\", type: typeEnum.rect, platform: platformEnum.svg, isDialog: true },\r\n        { label: \"圆\", type: typeEnum.circle, platform: platformEnum.svg },\r\n        { label: \"文字\", type: typeEnum.text, platform: platformEnum.svg }\r\n      ],\r\n      subIndex: 0\r\n    };\r\n  },\r\n  mounted() {\r\n    this.root = new Root({\r\n      el: this.$refs.root\r\n    });\r\n    this.root.startFocus();\r\n    this.root.el.addEventListener(\"drop\", this.handleDrop);\r\n    document.addEventListener(\"click\", () => {\r\n      this.style = null;\r\n    });\r\n    this.root.on(\"click\", item => {\r\n      if (this.root.state !== rootStateEnum.off) return;\r\n      this.panelVisible = true;\r\n      this.curElement = item;\r\n      const dataList = [];\r\n      eachObj(item.data, (value, key) => {\r\n        dataList.push({ key, value });\r\n      });\r\n\r\n      this.form = {\r\n        dataList: dataList,\r\n        items: configurableMap[item.type][item.platform].items.map(d => {\r\n          return {\r\n            ...d,\r\n            value: item[d.prop]\r\n          };\r\n        })\r\n      };\r\n    });\r\n\r\n    this.root.on(\"contextmenu\", this.handleContextmenu);\r\n    this.data &&\r\n      structRender(this.data, {\r\n        root: this.root\r\n      });\r\n  },\r\n  methods: {\r\n    handleDragstart(type, platform) {\r\n      this.type = type;\r\n      this.platform = platform;\r\n    },\r\n    handleDrop(e) {\r\n      let element = createElement({\r\n        type: this.type,\r\n        platform: this.platform,\r\n        x: e.offsetX,\r\n        y: e.offsetY,\r\n        onCreated() {\r\n          console.log(this);\r\n        },\r\n        onMounted() {\r\n          console.log(this);\r\n        },\r\n        onUnmount() {\r\n          console.log(this);\r\n        }\r\n      });\r\n      element.mount(this.root);\r\n    },\r\n    handleStartDrawPolyLine() {\r\n      this.root.startDrawPolyLine();\r\n    },\r\n    handleStartDrawLine() {\r\n      this.root.startDrawLine();\r\n    },\r\n    handleStartFocus() {\r\n      this.root.startFocus();\r\n    },\r\n    handleClearHandler() {\r\n      this.root.clearHandler();\r\n    },\r\n    handleSave() {\r\n      const data = this.root.export();\r\n      console.log(data);\r\n      localStorage.setItem(\"data\", JSON.stringify(data));\r\n    },\r\n    handleSure() {\r\n      this.curElement.attr(makeConfiguration(this.form.items));\r\n      this.curElement.data = makeMap(\r\n        this.form.dataList.filter(d => d.key),\r\n        (map, item) => {\r\n          map[item.key] = item.value;\r\n        }\r\n      );\r\n      this.panelVisible = false;\r\n    },\r\n    handleContextmenu(item, e) {\r\n      e.event.preventDefault();\r\n      this.style = {\r\n        left: e.offsetX + \"px\",\r\n        top: e.offsetY + \"px\"\r\n      };\r\n      this.curElement = item;\r\n      this.curEvent = e;\r\n      this.contextmenu = [\r\n        {\r\n          name: \"删除\",\r\n          handler: () => {\r\n            item.unmount();\r\n            this.style = null;\r\n          }\r\n        }\r\n      ];\r\n    },\r\n    handleSureSub(item) {\r\n      const element = createElement({\r\n        type: item.type,\r\n        platform: item.platform,\r\n        x: this.curEvent.offsetX + 20,\r\n        y: this.curEvent.offsetY + 20,\r\n        immediateMount: !item.isDialog\r\n      });\r\n      this.curElement.addChild(element);\r\n      this.subVisible = false;\r\n      this.style = null;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.header {\r\n  position: absolute;\r\n  top: 20px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  padding: 10px;\r\n  box-shadow: 0 2px 10px 0 rgba(82, 86, 108, 0.22);\r\n  background: #fff;\r\n  border-radius: 4px;\r\n  z-index: 99;\r\n}\r\n\r\n.bottom {\r\n  position: relative;\r\n}\r\n\r\n.root {\r\n  height: 100vh;\r\n}\r\n\r\n.contextmenu {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  background: #fff;\r\n  box-shadow: 0 4px 14px 0 rgba(82, 86, 108, 0.22);\r\n  border-radius: 4px;\r\n  padding: 8px 0;\r\n\r\n  div {\r\n    padding: 0 16px;\r\n    line-height: 28px;\r\n    cursor: pointer;\r\n    &:hover {\r\n      color: #365be4;\r\n    }\r\n  }\r\n}\r\n.sub-title {\r\n  margin-bottom: 10px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n\r\n.icon-btn {\r\n  padding: 3px;\r\n}\r\n.data-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-end;\r\n  ::v-deep {\r\n    > .el-form-item {\r\n      flex: 1;\r\n      margin-right: 10px;\r\n      margin-bottom: 10px;\r\n    }\r\n  }\r\n  .remove-btn {\r\n    margin-bottom: 10px;\r\n    line-height: 28px;\r\n  }\r\n}\r\n.footer {\r\n  margin-top: 16px;\r\n  text-align: center;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=5fd8411e&scoped=true&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&id=5fd8411e&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5fd8411e\",\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\r\nimport VueRouter from \"vue-router\";\r\nimport Home from \"../views/Home.vue\";\r\n\r\nVue.use(VueRouter);\r\n\r\nconst routes = [\r\n  {\r\n    path: \"/\",\r\n    name: \"Home\",\r\n    component: Home\r\n  },\r\n  {\r\n    path: \"/about\",\r\n    name: \"About\",\r\n    // route level code-splitting\r\n    // this generates a separate chunk (about.[hash].js) for this route\r\n    // which is lazy-loaded when the route is visited.\r\n    component: () => import(/* webpackChunkName: \"about\" */ \"../views/About.vue\")\r\n  },\r\n  {\r\n    path: \"/tree\",\r\n    name: \"tree\",\r\n    component: () => import(\"../views/tree/Index.vue\")\r\n  },\r\n  {\r\n    path: \"/target\",\r\n    name: \"target\",\r\n    component: () => import(\"../views/target/Index.vue\")\r\n  }\r\n];\r\n\r\nconst router = new VueRouter({\r\n  routes\r\n});\r\n\r\nexport default router;\r\n","import Vue from \"vue\";\r\nimport App from \"./App.vue\";\r\nimport router from \"./router\";\r\n\r\nVue.config.productionTip = false;\r\n\r\nnew Vue({\r\n  router,\r\n  render: h => h(App)\r\n}).$mount(\"#app\");\r\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","export function mixin(target, source, overlay) {\r\n  target = \"prototype\" in target ? target.prototype : target;\r\n  source = \"prototype\" in source ? source.prototype : source;\r\n\r\n  defaults(target, source, overlay);\r\n\r\n  function defaults(target, source, overlay) {\r\n    for (var key in source) {\r\n      if (hasOwnProperty(source, key) && (overlay ? hasOwnProperty(source, key) : !hasOwnProperty(target, key))) {\r\n        target[key] = source[key];\r\n      }\r\n    }\r\n    return target;\r\n  }\r\n}\r\n\r\nexport function extend(subClass, superClass) {\r\n  const subPrototype = subClass.prototype;\r\n\r\n  subClass.prototype = Object.create(superClass.prototype, {\r\n    constructor: {\r\n      value: subClass,\r\n      enumerable: false,\r\n      writable: true,\r\n      configurable: true\r\n    }\r\n  });\r\n\r\n  eachObj(subPrototype, (value, prop) => {\r\n    subClass.prototype[prop] = value;\r\n  });\r\n\r\n  setPrototypeOf(subClass, superClass);\r\n}\r\n\r\nexport function guid() {\r\n  return \"xxxxxxxx-xxxx-yxxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function(c) {\r\n    var r = (Math.random() * 16) | 0,\r\n      v = c === \"x\" ? r : (r & 0x3) | 0x8;\r\n    return v.toString(16);\r\n  });\r\n}\r\n\r\nexport function lastItem(list, index = 1) {\r\n  return list[list.length - index];\r\n}\r\n\r\nexport function hasOwnProperty(obj, prop) {\r\n  return Object.prototype.hasOwnProperty.call(obj, prop);\r\n}\r\n\r\nexport const setPrototypeOf =\r\n  Object.setPrototypeOf ||\r\n  function _setPrototypeOf(o, p) {\r\n    o.__proto__ = p;\r\n    return o;\r\n  };\r\n\r\nexport function eachObj(obj, fn) {\r\n  for (let key in obj) {\r\n    if (hasOwnProperty(obj, key)) {\r\n      fn(obj[key], key, obj);\r\n    }\r\n  }\r\n}\r\n\r\nexport function makeMap(list, fn) {\r\n  const map = {};\r\n  list.forEach((item, index) => {\r\n    fn(map, item, index);\r\n  });\r\n  return map;\r\n}\r\n\r\nexport function fixZrCoordinate(n) {\r\n  return ~~n + 0.5;\r\n  // return ~~n;\r\n}\r\n\r\nexport function createSvgNode(qualifiedName) {\r\n  return document.createElementNS(\"http://www.w3.org/2000/svg\", qualifiedName);\r\n}\r\n\r\n// 按键\r\nexport function handleKeyEvent(e, handles, cb) {\r\n  const curHandler = handles[e.key];\r\n  if (curHandler) {\r\n    if (isFunction(curHandler)) {\r\n      if (!e.ctrlKey && !e.altKey) {\r\n        curHandler();\r\n        cb?.();\r\n      }\r\n    } else {\r\n      const { modifiers, handler } = curHandler;\r\n      if (!modifiers || ((modifiers.ctrl ? e.ctrlKey : true) && (modifiers.alt ? e.altKey : true))) {\r\n        handler();\r\n        cb?.();\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport function isFunction(target) {\r\n  return target && typeof target === \"function\";\r\n}\r\n","module.exports = Vue;","function Storage() {\r\n  this.elementList = [];\r\n  this.elementMap = new Map();\r\n}\r\n\r\nStorage.prototype = {\r\n  add(element) {\r\n    this.elementList.push(element);\r\n    this.elementMap.set(element.id, element);\r\n  },\r\n\r\n  remove(element) {\r\n    const idx = this.elementList.findIndex(d => d === element);\r\n    if (idx !== -1) {\r\n      this.elementList.splice(idx, 1);\r\n      this.elementMap.delete(element.id);\r\n    }\r\n  },\r\n\r\n  getElementById(id) {\r\n    return this.elementMap.get(id);\r\n  },\r\n\r\n  getElementList() {\r\n    return this.elementList;\r\n  }\r\n};\r\n\r\nexport { Storage };\r\n","export const typeEnum = {\r\n  rect: \"rect\",\r\n  circle: \"circle\",\r\n  vertex: \"vertex\",\r\n  polyline: \"polyline\",\r\n  line: \"line\",\r\n  arrow: \"arrow\",\r\n  text: \"text\"\r\n};\r\n\r\nexport const platformEnum = {\r\n  dom: \"dom\",\r\n  zr: \"zr\",\r\n  svg: \"svg\"\r\n};\r\n\r\nexport const fieldTypeEnum = {\r\n  text: \"text\",\r\n  number: \"number\",\r\n  select: \"select\"\r\n};\r\n\r\nexport const rootStateEnum = {\r\n  off: 1,\r\n  focus: 2,\r\n  drawLine: 3,\r\n  drawPolyLine: 4\r\n};\r\n","import { platformEnum } from \"./enums\";\r\nimport { createSvgNode } from \"./helpers\";\r\n\r\nfunction Painter(root) {\r\n  const svg = createSvgNode(\"svg\");\r\n\r\n  root.appendChild(svg);\r\n\r\n  svg.setAttribute(\"width\", root.clientWidth);\r\n  svg.setAttribute(\"height\", root.clientHeight);\r\n\r\n  svg.style.cssText = \"position: absolute;left: 0;top:0;\";\r\n\r\n  this.svgRoot = svg;\r\n\r\n  this.svgZIndexMap = {};\r\n  this.svgZIndex = [];\r\n}\r\n\r\nPainter.prototype = {\r\n  constructor: Painter,\r\n\r\n  add(element) {\r\n    switch (element.platform) {\r\n      case platformEnum.dom:\r\n        this.domRoot.appendChild(element.el);\r\n        break;\r\n      case platformEnum.zr:\r\n        this.zrRoot.add(element.el);\r\n        break;\r\n      case platformEnum.svg:\r\n        if (!this.svgZIndexMap[element.zIndex]) {\r\n          const g = createSvgNode(\"g\");\r\n          g.setAttribute(\"z-index\", element.zIndex);\r\n          this.svgZIndexMap[element.zIndex] = g;\r\n          let preZIndex = this.svgZIndex.find(d => d < element.zIndex);\r\n          if (!preZIndex) {\r\n            preZIndex = this.svgZIndex[0];\r\n          }\r\n          this.svgRoot.insertBefore(g, this.svgZIndexMap[preZIndex]);\r\n          this.svgZIndex.push(element.zIndex);\r\n          this.svgZIndex.sort();\r\n        }\r\n        this.svgZIndexMap[element.zIndex].appendChild(element.el);\r\n        break;\r\n    }\r\n  },\r\n\r\n  remove(element) {\r\n    switch (element.platform) {\r\n      case platformEnum.dom:\r\n        this.domRoot.removeChild(element.el);\r\n        break;\r\n      case platformEnum.zr:\r\n        this.zrRoot.remove(element.el);\r\n        break;\r\n      case platformEnum.svg:\r\n        this.svgZIndexMap[element.zIndex].removeChild(element.el);\r\n        break;\r\n    }\r\n  }\r\n};\r\n\r\nexport { Painter };\r\n","function HandlerProxy(storage) {\r\n  this.typeMap = new Map();\r\n  this.storage = storage;\r\n}\r\n\r\nHandlerProxy.prototype = {\r\n  constructor: HandlerProxy,\r\n\r\n  on(type, handler) {\r\n    const handlerMap = new Map();\r\n    this.typeMap.set(type, handlerMap);\r\n    const elementMap = new Map();\r\n    handlerMap.set(handler, elementMap);\r\n    this.storage.getElementList().forEach(element => {\r\n      const wrappedHandler = e => {\r\n        handler(element, e);\r\n      };\r\n      elementMap.set(element, wrappedHandler);\r\n      element.on(type, wrappedHandler);\r\n    });\r\n  },\r\n\r\n  off(type, handler) {\r\n    if (!this.typeMap[type]) return;\r\n    this.storage.getElementList().forEach(element => {\r\n      const handlerMap = this.typeMap.get(type);\r\n      const elementMap = handlerMap.get(handler);\r\n      const wrappedHandler = elementMap.get(element);\r\n      element.off(type, wrappedHandler);\r\n      elementMap.delete(element);\r\n      if (!elementMap.size) {\r\n        handlerMap.delete(handler);\r\n      }\r\n      if (!handlerMap.size) {\r\n        this.typeMap.delete(type);\r\n      }\r\n    });\r\n  },\r\n\r\n  addElement(element) {\r\n    this.typeMap.forEach((handlerMap, type) => {\r\n      handlerMap.forEach((elementMap, handler) => {\r\n        const wrappedHandler = e => {\r\n          handler(element, e);\r\n        };\r\n        elementMap.set(element, wrappedHandler);\r\n        element.on(type, wrappedHandler);\r\n      });\r\n    });\r\n  },\r\n\r\n  removeElement(element) {\r\n    this.typeMap.forEach((handlerMap, type) => {\r\n      handlerMap.forEach(elementMap => {\r\n        element.off(type, elementMap.get(element));\r\n        elementMap.delete(element);\r\n      });\r\n    });\r\n  }\r\n};\r\n\r\nexport { HandlerProxy };\r\n","/**\n * 缓动代码来自 https://github.com/sole/tween.js/blob/master/src/Tween.js\n * @see http://sole.github.io/tween.js/examples/03_graphs.html\n * @exports zrender/animation/easing\n */\nvar easing = {\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  linear: function(k) {\n    return k;\n  },\n\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  quadraticIn: function(k) {\n    return k * k;\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  quadraticOut: function(k) {\n    return k * (2 - k);\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  quadraticInOut: function(k) {\n    if ((k *= 2) < 1) {\n      return 0.5 * k * k;\n    }\n    return -0.5 * (--k * (k - 2) - 1);\n  },\n\n  // 三次方的缓动（t^3）\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  cubicIn: function(k) {\n    return k * k * k;\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  cubicOut: function(k) {\n    return --k * k * k + 1;\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  cubicInOut: function(k) {\n    if ((k *= 2) < 1) {\n      return 0.5 * k * k * k;\n    }\n    return 0.5 * ((k -= 2) * k * k + 2);\n  },\n\n  // 四次方的缓动（t^4）\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  quarticIn: function(k) {\n    return k * k * k * k;\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  quarticOut: function(k) {\n    return 1 - --k * k * k * k;\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  quarticInOut: function(k) {\n    if ((k *= 2) < 1) {\n      return 0.5 * k * k * k * k;\n    }\n    return -0.5 * ((k -= 2) * k * k * k - 2);\n  },\n\n  // 五次方的缓动（t^5）\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  quinticIn: function(k) {\n    return k * k * k * k * k;\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  quinticOut: function(k) {\n    return --k * k * k * k * k + 1;\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  quinticInOut: function(k) {\n    if ((k *= 2) < 1) {\n      return 0.5 * k * k * k * k * k;\n    }\n    return 0.5 * ((k -= 2) * k * k * k * k + 2);\n  },\n\n  // 正弦曲线的缓动（sin(t)）\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  sinusoidalIn: function(k) {\n    return 1 - Math.cos((k * Math.PI) / 2);\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  sinusoidalOut: function(k) {\n    return Math.sin((k * Math.PI) / 2);\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  sinusoidalInOut: function(k) {\n    return 0.5 * (1 - Math.cos(Math.PI * k));\n  },\n\n  // 指数曲线的缓动（2^t）\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  exponentialIn: function(k) {\n    return k === 0 ? 0 : Math.pow(1024, k - 1);\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  exponentialOut: function(k) {\n    return k === 1 ? 1 : 1 - Math.pow(2, -10 * k);\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  exponentialInOut: function(k) {\n    if (k === 0) {\n      return 0;\n    }\n    if (k === 1) {\n      return 1;\n    }\n    if ((k *= 2) < 1) {\n      return 0.5 * Math.pow(1024, k - 1);\n    }\n    return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);\n  },\n\n  // 圆形曲线的缓动（sqrt(1-t^2)）\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  circularIn: function(k) {\n    return 1 - Math.sqrt(1 - k * k);\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  circularOut: function(k) {\n    return Math.sqrt(1 - --k * k);\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  circularInOut: function(k) {\n    if ((k *= 2) < 1) {\n      return -0.5 * (Math.sqrt(1 - k * k) - 1);\n    }\n    return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n  },\n\n  // 创建类似于弹簧在停止前来回振荡的动画\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  elasticIn: function(k) {\n    var s;\n    var a = 0.1;\n    var p = 0.4;\n    if (k === 0) {\n      return 0;\n    }\n    if (k === 1) {\n      return 1;\n    }\n    if (!a || a < 1) {\n      a = 1;\n      s = p / 4;\n    } else {\n      s = (p * Math.asin(1 / a)) / (2 * Math.PI);\n    }\n    return -(a * Math.pow(2, 10 * (k -= 1)) * Math.sin(((k - s) * (2 * Math.PI)) / p));\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  elasticOut: function(k) {\n    var s;\n    var a = 0.1;\n    var p = 0.4;\n    if (k === 0) {\n      return 0;\n    }\n    if (k === 1) {\n      return 1;\n    }\n    if (!a || a < 1) {\n      a = 1;\n      s = p / 4;\n    } else {\n      s = (p * Math.asin(1 / a)) / (2 * Math.PI);\n    }\n    return a * Math.pow(2, -10 * k) * Math.sin(((k - s) * (2 * Math.PI)) / p) + 1;\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  elasticInOut: function(k) {\n    var s;\n    var a = 0.1;\n    var p = 0.4;\n    if (k === 0) {\n      return 0;\n    }\n    if (k === 1) {\n      return 1;\n    }\n    if (!a || a < 1) {\n      a = 1;\n      s = p / 4;\n    } else {\n      s = (p * Math.asin(1 / a)) / (2 * Math.PI);\n    }\n    if ((k *= 2) < 1) {\n      return -0.5 * (a * Math.pow(2, 10 * (k -= 1)) * Math.sin(((k - s) * (2 * Math.PI)) / p));\n    }\n    return a * Math.pow(2, -10 * (k -= 1)) * Math.sin(((k - s) * (2 * Math.PI)) / p) * 0.5 + 1;\n  },\n\n  // 在某一动画开始沿指示的路径进行动画处理前稍稍收回该动画的移动\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  backIn: function(k) {\n    var s = 1.70158;\n    return k * k * ((s + 1) * k - s);\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  backOut: function(k) {\n    var s = 1.70158;\n    return --k * k * ((s + 1) * k + s) + 1;\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  backInOut: function(k) {\n    var s = 1.70158 * 1.525;\n    if ((k *= 2) < 1) {\n      return 0.5 * (k * k * ((s + 1) * k - s));\n    }\n    return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n  },\n\n  // 创建弹跳效果\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  bounceIn: function(k) {\n    return 1 - easing.bounceOut(1 - k);\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  bounceOut: function(k) {\n    if (k < 1 / 2.75) {\n      return 7.5625 * k * k;\n    } else if (k < 2 / 2.75) {\n      return 7.5625 * (k -= 1.5 / 2.75) * k + 0.75;\n    } else if (k < 2.5 / 2.75) {\n      return 7.5625 * (k -= 2.25 / 2.75) * k + 0.9375;\n    } else {\n      return 7.5625 * (k -= 2.625 / 2.75) * k + 0.984375;\n    }\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  bounceInOut: function(k) {\n    if (k < 0.5) {\n      return easing.bounceIn(k * 2) * 0.5;\n    }\n    return easing.bounceOut(k * 2 - 1) * 0.5 + 0.5;\n  }\n};\n\nexport default easing;\n","/**\n * 动画主控制器\n * @config target 动画对象，可以是数组，如果是数组的话会批量分发onframe等事件\n * @config life(1000) 动画时长\n * @config delay(0) 动画延迟时间\n * @config loop(true)\n * @config gap(0) 循环的间隔时间\n * @config onframe\n * @config easing(optional)\n * @config ondestroy(optional)\n * @config onrestart(optional)\n *\n * TODO pause\n */\nimport easingFuncs from \"./easing\";\n\nfunction Clip(options) {\n  this._target = options.target;\n\n  // 生命周期\n  this._life = options.life || 1000;\n  // 延时\n  this._delay = options.delay || 0;\n  // 开始时间\n  // this._startTime = new Date().getTime() + this._delay;// 单位毫秒\n  this._initialized = false;\n\n  // 是否循环\n  this.loop = options.loop == null ? false : options.loop;\n\n  this.gap = options.gap || 0;\n\n  this.easing = options.easing || \"Linear\";\n\n  this.onframe = options.onframe;\n  this.ondestroy = options.ondestroy;\n  this.onrestart = options.onrestart;\n\n  this._pausedTime = 0;\n  this._paused = false;\n}\n\nClip.prototype = {\n  constructor: Clip,\n\n  step: function(globalTime, deltaTime) {\n    // Set startTime on first step, or _startTime may has milleseconds different between clips\n    // PENDING\n    if (!this._initialized) {\n      this._startTime = globalTime + this._delay;\n      this._initialized = true;\n    }\n\n    if (this._paused) {\n      this._pausedTime += deltaTime;\n      return;\n    }\n\n    var percent = (globalTime - this._startTime - this._pausedTime) / this._life;\n\n    // 还没开始\n    if (percent < 0) {\n      return;\n    }\n\n    percent = Math.min(percent, 1);\n\n    var easing = this.easing;\n    var easingFunc = typeof easing === \"string\" ? easingFuncs[easing] : easing;\n    var schedule = typeof easingFunc === \"function\" ? easingFunc(percent) : percent;\n\n    this.fire(\"frame\", schedule);\n\n    // 结束\n    if (percent === 1) {\n      if (this.loop) {\n        this.restart(globalTime);\n        // 重新开始周期\n        // 抛出而不是直接调用事件直到 stage.update 后再统一调用这些事件\n        return \"restart\";\n      }\n\n      // 动画完成将这个控制器标识为待删除\n      // 在Animation.update中进行批量删除\n      this._needsRemove = true;\n      return \"destroy\";\n    }\n\n    return null;\n  },\n\n  restart: function(globalTime) {\n    var remainder = (globalTime - this._startTime - this._pausedTime) % this._life;\n    this._startTime = globalTime - remainder + this.gap;\n    this._pausedTime = 0;\n\n    this._needsRemove = false;\n  },\n\n  fire: function(eventType, arg) {\n    eventType = \"on\" + eventType;\n    if (this[eventType]) {\n      this[eventType](this._target, arg);\n    }\n  },\n\n  pause: function() {\n    this._paused = true;\n  },\n\n  resume: function() {\n    this._paused = false;\n  }\n};\n\nexport { Clip };\n","import { Clip } from \"./Clip\";\nimport { hasOwnProperty } from \"@/core/helpers\";\n\nfunction defaultGetter(target, key) {\n  return target[key];\n}\n\nfunction defaultSetter(target, key, value) {\n  target[key] = value;\n}\n\nfunction Animator(target, loop, getter, setter) {\n  this._tracks = {};\n  this._target = target;\n\n  this._loop = loop || false;\n\n  this._getter = getter || defaultGetter;\n  this._setter = setter || defaultSetter;\n\n  this._clipCount = 0;\n\n  this._delay = 0;\n\n  this._doneList = [];\n\n  this._onframeList = [];\n\n  this._clipList = [];\n}\n\nAnimator.prototype = {\n  constructor: Animator,\n\n  when: function(time /* ms */, props) {\n    let tracks = this._tracks;\n    for (let propName in props) {\n      if (!hasOwnProperty(props, propName)) {\n        continue;\n      }\n\n      if (!tracks[propName]) {\n        tracks[propName] = [];\n        // Invalid value\n        let value = this._getter(this._target, propName);\n        if (value == null) {\n          // zrLog('Invalid property ' + propName);\n          continue;\n        }\n        if (time !== 0) {\n          tracks[propName].push({\n            time: 0,\n            value: value\n          });\n        }\n      }\n      tracks[propName].push({\n        time: time,\n        value: props[propName]\n      });\n    }\n    return this;\n  },\n  during: function(callback) {\n    this._onframeList.push(callback);\n    return this;\n  },\n\n  pause: function() {\n    for (let i = 0; i < this._clipList.length; i++) {\n      this._clipList[i].pause();\n    }\n    this._paused = true;\n  },\n\n  resume: function() {\n    for (let i = 0; i < this._clipList.length; i++) {\n      this._clipList[i].resume();\n    }\n    this._paused = false;\n  },\n\n  isPaused: function() {\n    return !!this._paused;\n  },\n\n  _doneCallback: function() {\n    // Clear all tracks\n    this._tracks = {};\n    // Clear all clips\n    this._clipList.length = 0;\n\n    let doneList = this._doneList;\n    let len = doneList.length;\n    for (let i = 0; i < len; i++) {\n      doneList[i].call(this);\n    }\n  },\n  start: function(easing, forceAnimate) {\n    let self = this;\n    let clipCount = 0;\n\n    let oneTrackDone = function() {\n      clipCount--;\n      if (!clipCount) {\n        self._doneCallback();\n      }\n    };\n\n    let lastClip;\n    for (let propName in this._tracks) {\n      if (!hasOwnProperty(this._tracks, propName)) {\n        continue;\n      }\n      let clip = createTrackClip(this, easing, oneTrackDone, this._tracks[propName], propName, forceAnimate);\n      if (clip) {\n        this._clipList.push(clip);\n        clipCount++;\n\n        // If start after added to animation\n        if (this.animation) {\n          this.animation.addClip(clip);\n        }\n\n        lastClip = clip;\n      }\n    }\n\n    // Add during callback on the last clip\n    if (lastClip) {\n      let oldOnFrame = lastClip.onframe;\n      lastClip.onframe = function(target, percent) {\n        oldOnFrame(target, percent);\n\n        for (let i = 0; i < self._onframeList.length; i++) {\n          self._onframeList[i](target, percent);\n        }\n      };\n    }\n\n    if (!clipCount) {\n      this._doneCallback();\n    }\n    return this;\n  },\n\n  stop: function(forwardToLast) {\n    let clipList = this._clipList;\n    let animation = this.animation;\n    for (let i = 0; i < clipList.length; i++) {\n      let clip = clipList[i];\n      if (forwardToLast) {\n        // Move to last frame before stop\n        clip.onframe(this._target, 1);\n      }\n      animation && animation.removeClip(clip);\n    }\n    clipList.length = 0;\n  },\n  delay: function(time) {\n    this._delay = time;\n    return this;\n  },\n  done: function(cb) {\n    if (cb) {\n      this._doneList.push(cb);\n    }\n    return this;\n  },\n  getClips: function() {\n    return this._clipList;\n  }\n};\n\nfunction interpolateNumber(p0, p1, percent) {\n  return (p1 - p0) * percent + p0;\n}\n\nfunction createTrackClip(animator, easing, oneTrackDone, keyframes, propName, forceAnimate) {\n  // var setter = animator._setter;\n\n  let trackLen = keyframes.length;\n  if (!trackLen) {\n    return;\n  }\n\n  let trackMaxTime;\n  // Sort keyframe as ascending\n  keyframes.sort(function(a, b) {\n    return a.time - b.time;\n  });\n\n  trackMaxTime = keyframes[trackLen - 1].time;\n  let kfPercents = [];\n  let kfValues = [];\n  let prevValue = keyframes[0].value;\n  let isAllValueEqual = true;\n  for (let i = 0; i < trackLen; i++) {\n    kfPercents.push(keyframes[i].time / trackMaxTime);\n    let value = keyframes[i].value;\n\n    if (value === prevValue) {\n      isAllValueEqual = false;\n    }\n    prevValue = value;\n\n    kfValues.push(value);\n  }\n  if (!forceAnimate && isAllValueEqual) {\n    return;\n  }\n\n  let lastValue = kfValues[trackLen - 1];\n  for (let i = 0; i < trackLen - 1; i++) {\n    if (isNaN(kfValues[i]) && !isNaN(lastValue)) {\n      kfValues[i] = lastValue;\n    }\n  }\n\n  let lastFrame = 0;\n  let lastFramePercent = 0;\n  let start;\n  let w;\n\n  let onframe = function(target, percent) {\n    let frame;\n    if (percent < 0) {\n      frame = 0;\n    } else if (percent < lastFramePercent) {\n      start = Math.min(lastFrame + 1, trackLen - 1);\n      for (frame = start; frame >= 0; frame--) {\n        if (kfPercents[frame] <= percent) {\n          break;\n        }\n      }\n      frame = Math.min(frame, trackLen - 2);\n    } else {\n      for (frame = lastFrame; frame < trackLen; frame++) {\n        if (kfPercents[frame] > percent) {\n          break;\n        }\n      }\n      frame = Math.min(frame - 1, trackLen - 2);\n    }\n    lastFrame = frame;\n    lastFramePercent = percent;\n\n    let range = kfPercents[frame + 1] - kfPercents[frame];\n    if (range === 0) {\n      return;\n    } else {\n      w = (percent - kfPercents[frame]) / range;\n    }\n    let value = interpolateNumber(kfValues[frame], kfValues[frame + 1], w);\n    // setter(target, propName, value);\n    target.attr(propName, value);\n  };\n\n  let clip = new Clip({\n    target: animator._target,\n    life: trackMaxTime,\n    loop: animator._loop,\n    delay: animator._delay,\n    onframe: onframe,\n    ondestroy: oneTrackDone\n  });\n\n  if (easing) {\n    clip.easing = easing;\n  }\n\n  return clip;\n}\n\nexport { Animator };\n","import { Animator } from \"./Animator\";\n\nfunction Animation(options) {\n  options = options || {};\n\n  this.stage = options.stage || {};\n\n  this.onframe = options.onframe || function() {};\n\n  this._clips = [];\n\n  this._running = false;\n\n  this._time;\n\n  this._pausedTime;\n\n  this._pauseStart;\n\n  this._paused = false;\n}\n\nAnimation.prototype = {\n  constructor: Animation,\n\n  addClip: function(clip) {\n    this._clips.push(clip);\n  },\n\n  addAnimator: function(animator) {\n    animator.animation = this;\n    let clips = animator.getClips();\n    for (let i = 0; i < clips.length; i++) {\n      this.addClip(clips[i]);\n    }\n  },\n\n  removeClip: function(clip) {\n    let idx = this._clips.indexOf(clip);\n    if (idx >= 0) {\n      this._clips.splice(idx, 1);\n    }\n  },\n\n  removeAnimator: function(animator) {\n    let clips = animator.getClips();\n    for (let i = 0; i < clips.length; i++) {\n      this.removeClip(clips[i]);\n    }\n    animator.animation = null;\n  },\n\n  _update: function() {\n    let time = new Date().getTime() - this._pausedTime;\n    let delta = time - this._time;\n    let clips = this._clips;\n    let len = clips.length;\n\n    let deferredEvents = [];\n    let deferredClips = [];\n    for (let i = 0; i < len; i++) {\n      let clip = clips[i];\n      let e = clip.step(time, delta);\n      if (e) {\n        deferredEvents.push(e);\n        deferredClips.push(clip);\n      }\n    }\n\n    // Remove the finished clip\n    for (let i = 0; i < len; ) {\n      if (clips[i]._needsRemove) {\n        clips[i] = clips[len - 1];\n        clips.pop();\n        len--;\n      } else {\n        i++;\n      }\n    }\n\n    len = deferredEvents.length;\n    for (let i = 0; i < len; i++) {\n      deferredClips[i].fire(deferredEvents[i]);\n    }\n\n    this._time = time;\n\n    this.onframe(delta);\n\n    // this.trigger(\"frame\", delta);\n  },\n\n  _startLoop: function() {\n    let self = this;\n\n    this._running = true;\n\n    function step() {\n      if (self._running) {\n        requestAnimationFrame(step);\n\n        !self._paused && self._update();\n      }\n    }\n\n    requestAnimationFrame(step);\n  },\n\n  start: function() {\n    this._time = new Date().getTime();\n    this._pausedTime = 0;\n\n    this._startLoop();\n  },\n\n  stop: function() {\n    this._running = false;\n  },\n\n  /**\n   * Pause animation.\n   */\n  pause: function() {\n    if (!this._paused) {\n      this._pauseStart = new Date().getTime();\n      this._paused = true;\n    }\n  },\n\n  resume: function() {\n    if (this._paused) {\n      this._pausedTime += new Date().getTime() - this._pauseStart;\n      this._paused = false;\n    }\n  },\n\n  clear: function() {\n    this._clips = [];\n  },\n\n  isFinished: function() {\n    return !this._clips.length;\n  },\n\n  animate: function(target, options) {\n    options = options || {};\n\n    let animator = new Animator(target, options.loop, options.getter, options.setter);\n\n    this.addAnimator(animator);\n\n    return animator;\n  }\n};\n\nexport { Animation };\n","import { Storage } from \"./Storage\";\r\nimport { Painter } from \"./Painter\";\r\nimport { rootStateEnum } from \"./enums\";\r\nimport { HandlerProxy } from \"./Handler\";\r\nimport { Animation } from \"@/core/animation/Animation\";\r\n\r\nfunction Root(opts) {\r\n  this.el = opts.el;\r\n  this.oncontextmenu = opts.oncontextmenu;\r\n  this.storage = new Storage();\r\n  this.painter = new Painter(this.el);\r\n  this.handlerProxy = new HandlerProxy(this.storage);\r\n  this.root = this;\r\n  this.state = rootStateEnum.off;\r\n  // 选中resize\r\n  this.curResizeElement = null;\r\n  // 画连接线\r\n  this.curDrawLine = null;\r\n  this.isNewPoint = false;\r\n\r\n  // 动画\r\n  this.animation = new Animation();\r\n  this.animation.start();\r\n}\r\n\r\nRoot.prototype = {\r\n  constructor: Root,\r\n  add(element) {\r\n    this.painter.add(element);\r\n    this.storage.add(element);\r\n    this.handlerProxy.addElement(element);\r\n    switch (this.state) {\r\n      case rootStateEnum.focus:\r\n        element.addResize?.();\r\n        element.addDrag?.();\r\n        break;\r\n      case rootStateEnum.drawLine:\r\n        element.addDrawLine?.();\r\n        break;\r\n      case rootStateEnum.drawPolyLine:\r\n        element.addDrawPolyLine?.();\r\n        break;\r\n    }\r\n\r\n    // if (element.type === \"rect\") {\r\n    //   setInterval(() => {\r\n    //     element\r\n    //       .animate(\"\", false)\r\n    //       .when(300, { x: element.x + 5 })\r\n    //       .start();\r\n    //   }, 300);\r\n    // }\r\n  },\r\n\r\n  remove(element) {\r\n    element.removeMove?.();\r\n    element.removeResize?.();\r\n    element.removeDrawLinkLine?.();\r\n\r\n    this.painter.remove(element);\r\n    this.storage.remove(element);\r\n    this.handlerProxy.removeElement(element);\r\n  },\r\n\r\n  clearHandler() {\r\n    this.endDrawLine();\r\n    this.endElementFocus();\r\n  },\r\n\r\n  startFocus() {\r\n    if (this.state === rootStateEnum.focus) return;\r\n    this.clearHandler();\r\n    this.state = rootStateEnum.focus;\r\n    this.storage.getElementList().forEach(element => {\r\n      element.addResize?.();\r\n      element.addDrag?.();\r\n    });\r\n    this.handleKeydown = e => {\r\n      this.curResizeElement?.updateByKeydown?.(e);\r\n    };\r\n    document.addEventListener(\"keydown\", this.handleKeydown);\r\n\r\n    this.handleBlur = () => {\r\n      this.curResizeElement?.onblur();\r\n      this.curResizeElement = null;\r\n    };\r\n    document.addEventListener(\"mousedown\", this.handleBlur);\r\n  },\r\n\r\n  // 结束元素可选择\r\n  endElementFocus() {\r\n    this.state = rootStateEnum.off;\r\n    this.storage.getElementList().forEach(element => {\r\n      element.removeMove?.();\r\n      element.removeResize?.();\r\n    });\r\n    this.curResizeElement = null;\r\n    document.removeEventListener(\"keydown\", this.handleKeydown);\r\n    document.removeEventListener(\"mousedown\", this.handleBlur);\r\n  },\r\n\r\n  // 画直线\r\n  startDrawLine() {\r\n    if (this.state === rootStateEnum.drawLine) return;\r\n    this.clearHandler();\r\n    this.state = rootStateEnum.drawLine;\r\n    this.storage.getElementList().forEach(element => {\r\n      element.addDrawLine?.();\r\n    });\r\n  },\r\n\r\n  // 画折线\r\n  startDrawPolyLine() {\r\n    if (this.state === rootStateEnum.drawPolyLine) return;\r\n    this.clearHandler();\r\n    this.state = rootStateEnum.drawPolyLine;\r\n    this.storage.getElementList().forEach(element => {\r\n      element.addDrawPolyLine?.();\r\n    });\r\n  },\r\n\r\n  // 结束画线\r\n  endDrawLine() {\r\n    this.state = rootStateEnum.off;\r\n    this.storage.getElementList().forEach(element => {\r\n      element.removeDrawLinkLine?.();\r\n    });\r\n  },\r\n\r\n  export() {\r\n    return {\r\n      width: this.el.clientWidth,\r\n      height: this.el.clientHeight,\r\n      elements: this.storage\r\n        .getElementList()\r\n        .map(element => {\r\n          if (!element.parent) {\r\n            return element.export();\r\n          }\r\n        })\r\n        .filter(Boolean)\r\n    };\r\n  },\r\n\r\n  flushRectLineRelation() {\r\n    this.storage.getElementList().forEach(element => {\r\n      if (element.isLinkLine) {\r\n        const startElement = this.storage.getElementById(element.startId);\r\n        element.startElement = startElement;\r\n        startElement.lines.push(element);\r\n        const endElement = this.storage.getElementById(element.endId);\r\n        element.endElement = endElement;\r\n        endElement.lines.push(element);\r\n      }\r\n    });\r\n  },\r\n\r\n  on(type, handler) {\r\n    this.handlerProxy.on(type, handler);\r\n  },\r\n\r\n  off(type, handler) {\r\n    this.handlerProxy.off(type, handler);\r\n  }\r\n};\r\n\r\nexport { Root };\r\n","import { platformEnum } from \"./enums\";\r\n\r\nfunction Eventful() {\r\n  if (this.platform === platformEnum.dom || this.platform === platformEnum.svg) {\r\n    this.handlerMap = new Map();\r\n  }\r\n}\r\n\r\nEventful.prototype = {\r\n  constructor: Eventful,\r\n\r\n  on(type, handler) {\r\n    switch (this.platform) {\r\n      case platformEnum.dom:\r\n        onDOM.call(this, type, handler);\r\n        break;\r\n      case platformEnum.svg:\r\n        onDOM.call(this, type, handler);\r\n        break;\r\n      case platformEnum.zr:\r\n        onZR.call(this, type, handler);\r\n        break;\r\n    }\r\n  },\r\n\r\n  off(type, handler) {\r\n    switch (this.platform) {\r\n      case platformEnum.dom:\r\n        offDOM.call(this, type, handler);\r\n        break;\r\n      case platformEnum.svg:\r\n        offDOM.call(this, type, handler);\r\n        break;\r\n      case platformEnum.zr:\r\n        offZR.call(this, type, handler);\r\n        break;\r\n    }\r\n  }\r\n};\r\n\r\nfunction onDOM(type, handler) {\r\n  const wrappedHandler = event => {\r\n    handler(makeEventPacket(event));\r\n  };\r\n  this.handlerMap.set(handler, wrappedHandler);\r\n  this.el.addEventListener(type, wrappedHandler);\r\n}\r\n\r\nfunction offDOM(type, handler) {\r\n  const wrappedHandler = this.handlerMap.get(handler);\r\n  this.el.removeEventListener(type, wrappedHandler);\r\n}\r\n\r\nfunction onZR(type, handler) {\r\n  this.el.on(type, handler);\r\n}\r\n\r\nfunction offZR(type, handler) {\r\n  this.el.off(type, handler);\r\n}\r\n\r\nexport function makeEventPacket(event) {\r\n  return {\r\n    offsetX: event.layerX,\r\n    offsetY: event.layerY,\r\n    event\r\n  };\r\n}\r\n\r\nexport { Eventful };\r\n","function Child() {}\r\n\r\nChild.prototype = {\r\n  constructor: Child,\r\n\r\n  parent: null,\r\n\r\n  parentOffsetX: 0,\r\n\r\n  parentOffsetY: 0,\r\n\r\n  addToParent(parent) {\r\n    this.parent = parent;\r\n\r\n    this.updateOffset();\r\n\r\n    parent.isMounted && this.mount(parent.root);\r\n  },\r\n\r\n  removeFromParent() {\r\n    this.parent?.removeChild?.(this);\r\n    this.parent = null;\r\n  },\r\n\r\n  syncWithParent() {\r\n    this.attr({\r\n      x: this.parent.x + this.parentOffsetX,\r\n      y: this.parent.y + this.parentOffsetY\r\n    });\r\n  },\r\n\r\n  updateOffset() {\r\n    if (!this.parent) return;\r\n    this.parentOffsetX = this.x - this.parent.x;\r\n    this.parentOffsetY = this.y - this.parent.y;\r\n  }\r\n};\r\n\r\nexport { Child };\r\n","import { Animator } from \"../animation/Animator\";\r\nimport { hasOwnProperty } from \"@/core/helpers\";\r\n\r\nfunction Animatable() {\r\n  this.animators = [];\r\n}\r\n\r\nAnimatable.prototype = {\r\n  constructor: Animatable,\r\n\r\n  /**\r\n   * 动画\r\n   *\r\n   * @param {string} path The path to fetch value from object, like 'a.b.c'.\r\n   * @param {boolean} [loop] Whether to loop animation.\r\n   * @return {module:zrender/animation/Animator}\r\n   * @example:\r\n   *     el.animate('style', false)\r\n   *         .when(1000, {x: 10} )\r\n   *         .done(function(){ // Animation done })\r\n   *         .start()\r\n   */\r\n  animate: function(path, loop) {\r\n    var animators = this.animators;\r\n\r\n    var animator = new Animator(this, loop);\r\n\r\n    animator.done(function() {\r\n      animators.splice(animators.indexOf(animator), 1);\r\n    });\r\n\r\n    animators.push(animator);\r\n\r\n    if (this.root) {\r\n      this.root.animation.addAnimator(animator);\r\n    }\r\n\r\n    return animator;\r\n  },\r\n\r\n  stopAnimation: function(forwardToLast) {\r\n    var animators = this.animators;\r\n    var len = animators.length;\r\n    for (var i = 0; i < len; i++) {\r\n      animators[i].stop(forwardToLast);\r\n    }\r\n    animators.length = 0;\r\n\r\n    return this;\r\n  },\r\n\r\n  /**\r\n   * Caution: this method will stop previous animation.\r\n   * So do not use this method to one element twice before\r\n   * animation starts, unless you know what you are doing.\r\n   * @param {Object} target\r\n   * @param {number} [time=500] Time in ms\r\n   * @param {string} [easing='linear']\r\n   * @param {number} [delay=0]\r\n   * @param {Function} [callback]\r\n   * @param {Function} [forceAnimate] Prevent stop animation and callback\r\n   *        immediently when target values are the same as current values.\r\n   *\r\n   * @example\r\n   *  // Animate position\r\n   *  el.animateTo({\r\n   *      position: [10, 10]\r\n   *  }, function () { // done })\r\n   *\r\n   *  // Animate shape, style and position in 100ms, delayed 100ms, with cubicOut easing\r\n   *  el.animateTo({\r\n   *      shape: {\r\n   *          width: 500\r\n   *      },\r\n   *      style: {\r\n   *          fill: 'red'\r\n   *      }\r\n   *      position: [10, 10]\r\n   *  }, 100, 100, 'cubicOut', function () { // done })\r\n   */\r\n  // TODO Return animation key\r\n  animateTo: function(target, time, delay, easing, callback, forceAnimate) {\r\n    animateTo(this, target, time, delay, easing, callback, forceAnimate);\r\n  },\r\n\r\n  /**\r\n   * Animate from the target state to current state.\r\n   * The params and the return value are the same as `this.animateTo`.\r\n   */\r\n  animateFrom: function(target, time, delay, easing, callback, forceAnimate) {\r\n    animateTo(this, target, time, delay, easing, callback, forceAnimate, true);\r\n  }\r\n};\r\n\r\nfunction animateTo(animatable, target, time, delay, easing, callback, forceAnimate, reverse) {\r\n  // animateTo(target, time, easing, callback);\r\n  if (typeof delay === \"string\") {\r\n    callback = easing;\r\n    easing = delay;\r\n    delay = 0;\r\n  }\r\n  // animateTo(target, time, delay, callback);\r\n  else if (typeof easing === \"function\") {\r\n    callback = easing;\r\n    easing = \"linear\";\r\n    delay = 0;\r\n  }\r\n  // animateTo(target, time, callback);\r\n  else if (typeof delay === \"function\") {\r\n    callback = delay;\r\n    delay = 0;\r\n  }\r\n  // animateTo(target, callback)\r\n  else if (typeof time === \"function\") {\r\n    callback = time;\r\n    time = 500;\r\n  }\r\n  // animateTo(target)\r\n  else if (!time) {\r\n    time = 500;\r\n  }\r\n  animatable.stopAnimation();\r\n  animateToShallow(animatable, \"\", animatable, target, time, delay, reverse);\r\n\r\n  var animators = animatable.animators.slice();\r\n  var count = animators.length;\r\n  function done() {\r\n    count--;\r\n    if (!count) {\r\n      callback && callback();\r\n    }\r\n  }\r\n\r\n  if (!count) {\r\n    callback && callback();\r\n  }\r\n  for (var i = 0; i < animators.length; i++) {\r\n    animators[i].done(done).start(easing, forceAnimate);\r\n  }\r\n}\r\n\r\n/**\r\n * @param {string} path=''\r\n * @param {Object} source=animatable\r\n * @param {Object} target\r\n * @param {number} [time=500]\r\n * @param {number} [delay=0]\r\n * @param {boolean} [reverse] If `true`, animate\r\n *        from the `target` to current state.\r\n *\r\n * @example\r\n *  // Animate position\r\n *  el._animateToShallow({\r\n *      position: [10, 10]\r\n *  })\r\n *\r\n *  // Animate shape, style and position in 100ms, delayed 100ms\r\n *  el._animateToShallow({\r\n *      shape: {\r\n *          width: 500\r\n *      },\r\n *      style: {\r\n *          fill: 'red'\r\n *      }\r\n *      position: [10, 10]\r\n *  }, 100, 100)\r\n */\r\nfunction animateToShallow(animatable, path, source, target, time, delay, reverse) {\r\n  var objShallow = {};\r\n  var propertyCount = 0;\r\n  for (var name in target) {\r\n    if (!hasOwnProperty(target, name)) {\r\n      continue;\r\n    }\r\n\r\n    if (source[name] != null) {\r\n      if (reverse) {\r\n        objShallow[name] = source[name];\r\n        setAttrByPath(animatable, path, name, target[name]);\r\n      } else {\r\n        objShallow[name] = target[name];\r\n      }\r\n      propertyCount++;\r\n    } else if (target[name] != null && !reverse) {\r\n      setAttrByPath(animatable, path, name, target[name]);\r\n    }\r\n  }\r\n\r\n  if (propertyCount > 0) {\r\n    animatable\r\n      .animate(path, false)\r\n      .when(time == null ? 500 : time, objShallow)\r\n      .delay(delay || 0);\r\n  }\r\n}\r\n\r\nfunction setAttrByPath(el, path, name, value) {\r\n  el.attr(name, value);\r\n}\r\n\r\nexport { Animatable };\r\n","import { makeEventPacket } from \"../Eventful\";\r\n\r\nfunction Draggable() {}\r\n\r\nDraggable.prototype = {\r\n  constructor: Draggable,\r\n\r\n  dragOffsetX: 0,\r\n\r\n  dragOffsetY: 0,\r\n\r\n  addDrag() {\r\n    const root = this.root;\r\n    const mousedown = e => {\r\n      e.event.stopPropagation();\r\n      if (e.event.button !== 0) return;\r\n      this.ondragstart([e.offsetX, e.offsetY]);\r\n\r\n      const mousemove = e => {\r\n        e = makeEventPacket(e);\r\n        this.ondrag({ x: e.offsetX - this.dragOffsetX, y: e.offsetY - this.dragOffsetY });\r\n      };\r\n\r\n      const mouseup = () => {\r\n        root.el.removeEventListener(\"mousemove\", mousemove);\r\n        root.el.removeEventListener(\"mouseup\", mouseup);\r\n      };\r\n\r\n      root.el.addEventListener(\"mousemove\", mousemove);\r\n      root.el.addEventListener(\"mouseup\", mouseup);\r\n    };\r\n    this.on(\"mousedown\", mousedown);\r\n    this.removeMove = () => {\r\n      this.off(\"mousedown\", mousedown);\r\n    };\r\n  },\r\n\r\n  // Interface\r\n  ondragstart([x, y]) {\r\n    this.dragOffsetX = x - this.x;\r\n    this.dragOffsetY = y - this.y;\r\n  },\r\n\r\n  ondrag({ x, y }) {\r\n    this.attr({ x, y });\r\n  }\r\n};\r\n\r\nexport { Draggable };\r\n","import { eachObj, guid, handleKeyEvent, mixin } from \"./helpers\";\r\nimport { Eventful } from \"./Eventful\";\r\nimport { Child } from \"./mixins/Child\";\r\nimport { Animatable } from \"@/core/mixins/Animatable\";\r\nimport { Draggable } from \"@/core/mixins/Draggable\";\r\n/**\r\n * @description 所有元素的抽象类\r\n **/\r\n\r\nfunction Element(opts) {\r\n  Eventful.call(this, opts);\r\n  Child.call(this, opts);\r\n  Draggable.call(this, opts);\r\n  Animatable.call(this, opts);\r\n  eachObj(opts, (value, key) => {\r\n    this[key] = value;\r\n  });\r\n  this.id = opts.id || guid();\r\n  this.create();\r\n  this.onCreated?.();\r\n}\r\n\r\nElement.prototype = {\r\n  constructor: Element,\r\n\r\n  x: 0,\r\n\r\n  y: 0,\r\n\r\n  root: null,\r\n\r\n  el: null,\r\n\r\n  extData: {},\r\n\r\n  customData: {},\r\n\r\n  isMounted: false,\r\n\r\n  zIndex: 1,\r\n\r\n  // Interface\r\n  create() {},\r\n\r\n  mount(root) {\r\n    if (this.isMounted) return;\r\n    this.root = root;\r\n    root.add(this);\r\n    this.isMounted = true;\r\n\r\n    this.onMounted?.();\r\n  },\r\n\r\n  attr(key, value) {\r\n    if (typeof key === \"object\") {\r\n      eachObj(key, (value, key) => {\r\n        this[key] = value;\r\n      });\r\n    } else {\r\n      this[key] = value;\r\n    }\r\n    this.update();\r\n  },\r\n\r\n  update() {\r\n    this.mapToView();\r\n    this.updateOffset();\r\n  },\r\n\r\n  unmount() {\r\n    if (!this.isMounted) return;\r\n    this.removeFromParent();\r\n    this.root.remove(this);\r\n    this.isMounted = false;\r\n\r\n    this.onUnmount?.();\r\n  },\r\n\r\n  // Interface\r\n  mapToView() {},\r\n\r\n  updateByKeydown(e) {\r\n    updateByKeydown.call(this, e);\r\n  },\r\n\r\n  export() {\r\n    return {\r\n      type: this.type,\r\n      platform: this.platform,\r\n      id: this.id,\r\n      x: this.x,\r\n      y: this.y,\r\n      extData: this.extData,\r\n      customData: this.customData\r\n    };\r\n  }\r\n};\r\n\r\nmixin(Element, Eventful);\r\nmixin(Element, Child);\r\nmixin(Element, Animatable);\r\nmixin(Element, Draggable);\r\n\r\nfunction updateByKeydown(e) {\r\n  handleKeyEvent(e, {\r\n    ArrowUp: () => {\r\n      this.attr(\"y\", this.y - 1);\r\n    },\r\n    ArrowRight: () => {\r\n      this.attr(\"x\", this.x + 1);\r\n    },\r\n    ArrowDown: () => {\r\n      this.attr(\"y\", this.y + 1);\r\n    },\r\n    ArrowLeft: () => {\r\n      this.attr(\"x\", this.x - 1);\r\n    },\r\n    Delete: () => {\r\n      this.unmount();\r\n    }\r\n  });\r\n}\r\n\r\nexport { Element };\r\n","import { Element } from \"../Element\";\r\nimport { typeEnum } from \"../enums\";\r\nimport { extend, lastItem } from \"../helpers\";\r\n\r\nfunction BaseArrow(opts) {\r\n  Element.call(this, opts);\r\n}\r\n\r\nBaseArrow.prototype = {\r\n  constructor: BaseArrow,\r\n\r\n  type: typeEnum.arrow,\r\n\r\n  r: 6,\r\n\r\n  fill: \"#000\",\r\n\r\n  rotation: Math.PI / 2,\r\n\r\n  asyncWithLine() {\r\n    const last = lastItem(this.line.points);\r\n    this.attr({\r\n      x: last[0],\r\n      y: last[1],\r\n      rotation: this.line.makeRotation()\r\n    });\r\n  },\r\n\r\n  ondrag() {},\r\n\r\n  export() {}\r\n};\r\n\r\nextend(BaseArrow, Element);\r\n\r\nexport { BaseArrow };\r\n","import { createSvgNode, extend } from \"../../helpers\";\r\nimport { platformEnum } from \"../../enums\";\r\nimport { BaseArrow } from \"../BaseArrow\";\r\n\r\nfunction ArrowSvg(opts) {\r\n  BaseArrow.call(this, opts);\r\n}\r\n\r\nArrowSvg.prototype = {\r\n  constructor: ArrowSvg,\r\n\r\n  platform: platformEnum.svg,\r\n\r\n  create() {\r\n    this.el = createSvgNode(\"polygon\");\r\n    this.mapToView();\r\n  },\r\n\r\n  mapToView() {\r\n    fixArrowCenter(this);\r\n    const el = this.el;\r\n    el.setAttribute(\r\n      \"points\",\r\n      makePoints\r\n        .call(this)\r\n        .map(d => d.join(\",\"))\r\n        .join(\" \")\r\n    );\r\n    el.setAttribute(\"fill\", this.fill);\r\n    el.setAttribute(\"transform\", `rotate(${(-this.rotation * 180) / Math.PI}, ${this.x},${this.y})`);\r\n  }\r\n};\r\n\r\nextend(ArrowSvg, BaseArrow);\r\n\r\nfunction fixArrowCenter(arrow) {\r\n  let { rotation, r } = arrow;\r\n  arrow.x += r * Math.sin(rotation);\r\n  arrow.y += r * Math.cos(rotation);\r\n}\r\n\r\nconst tan = Math.tan(Math.PI / 6);\r\n\r\nfunction makePoints() {\r\n  return [\r\n    [this.x, this.y - this.r],\r\n    [this.x + this.r * 1.5 * tan, this.y + this.r / 2],\r\n    [this.x - this.r * 1.5 * tan, this.y + this.r / 2]\r\n  ];\r\n}\r\n\r\nexport { ArrowSvg };\r\n","import { makeEventPacket } from \"../Eventful\";\r\n\r\n// 可以添加连接线的类的混入类的抽象类 用于表示其公共部分 只用于混入 不能继承 继承无效\r\nfunction BaseLinkable() {\r\n  this.lines = this.lines || [];\r\n}\r\n\r\nBaseLinkable.prototype = {\r\n  constructor: BaseLinkable,\r\n\r\n  addDrawLinkLine() {\r\n    const root = this.root;\r\n\r\n    const click = e => {\r\n      e.event.stopPropagation();\r\n\r\n      if (root.curDrawLine) {\r\n        // 避免作用于正在画的线\r\n        if (root.curDrawLine === this) return;\r\n        clickToEnd.call(this, e);\r\n      } else {\r\n        // 鼠标移动绘制线段\r\n        const mousemove = e => {\r\n          this.lineDrawing(makeEventPacket(e));\r\n        };\r\n\r\n        const clickRoot = () => {\r\n          root.isNewPoint = true;\r\n        };\r\n        root.el.addEventListener(\"click\", clickRoot);\r\n\r\n        // 键盘控制\r\n        const drawKeyDown = e => {\r\n          root.curDrawLine?.keyCtrlDrawing(e);\r\n        };\r\n        document.addEventListener(\"keydown\", drawKeyDown);\r\n\r\n        root.offCurDrawLine = () => {\r\n          document.removeEventListener(\"mousemove\", mousemove);\r\n          document.removeEventListener(\"keydown\", drawKeyDown);\r\n          root.el.removeEventListener(\"click\", clickRoot);\r\n          root.offCurDrawLine = null;\r\n          root.curDrawLine = null;\r\n        };\r\n        document.addEventListener(\"mousemove\", mousemove);\r\n\r\n        clickToStart.call(this, e);\r\n      }\r\n    };\r\n\r\n    this.on(\"click\", click);\r\n\r\n    this.removeDrawLinkLine = () => {\r\n      this.off(\"click\", click);\r\n    };\r\n  },\r\n\r\n  // Interface 开始画线 用于确定起始点\r\n  makeLineStartPoint() {},\r\n\r\n  // Interface 开始画线 用于生成对应实现类的实例\r\n  makeLinkLine() {},\r\n\r\n  // Interface 画线过程中\r\n  lineDrawing() {},\r\n\r\n  // Interface 结束画线时的逻辑\r\n  makeLineEndPoint() {},\r\n\r\n  updateLines() {\r\n    this.lines.forEach(line => {\r\n      const isFollowStart = line.startElement === this;\r\n      const points = line.points;\r\n      line.focusIndex = isFollowStart ? 0 : points.length - 1;\r\n\r\n      const sin = isFollowStart ? line.startSin : line.endSin;\r\n      const cos = isFollowStart ? line.startCos : line.endCos;\r\n\r\n      line.updatePoint(line.focusIndex, this.makeLineVertexByAngle(sin, cos));\r\n    });\r\n  },\r\n\r\n  // 通过与宿主元素的 sin cos关系得到在宿主元素上的交点 用于更新当前线的端点\r\n  makeLineVertexByAngle() {},\r\n\r\n  removeLine(line) {\r\n    this.lines.splice(\r\n      this.lines.findIndex(d => d === line),\r\n      1\r\n    );\r\n  },\r\n\r\n  clearLine() {\r\n    while (this.lines.length) {\r\n      this.lines[0].unmount();\r\n    }\r\n  }\r\n};\r\n\r\n// 开始画线\r\nfunction clickToStart(e) {\r\n  const { line, sin, cos } = this.makeLinkLine(e);\r\n\r\n  if (this.makeBeforeBreakPoints) {\r\n    line.points.push(...this.makeBeforeBreakPoints([e.offsetX, e.offsetY]));\r\n    line.startElement = this.startElement;\r\n    this.startElement.lines.push(line);\r\n  } else {\r\n    line.startElement = this;\r\n    this.lines.push(line);\r\n  }\r\n\r\n  line.startSin = sin;\r\n  line.startCos = cos;\r\n\r\n  const root = this.root;\r\n\r\n  line.mount(root);\r\n\r\n  root.curDrawLine = line;\r\n\r\n  root.isNewPoint = true;\r\n}\r\n\r\n// 结束画线\r\nfunction clickToEnd() {\r\n  const root = this.root;\r\n\r\n  const line = root.curDrawLine;\r\n  const [last2, last] = line.makeDirectionPoints();\r\n\r\n  const endPoint = this.makeLineEndPoint(last2, last);\r\n\r\n  if (!endPoint) return;\r\n\r\n  root.offCurDrawLine();\r\n\r\n  const { point, sin, cos } = endPoint;\r\n\r\n  if (this.makeAfterBreakPoints) {\r\n    line.points.pop();\r\n    line.points.push(...this.makeAfterBreakPoints(last));\r\n    line.endElement = this.endElement;\r\n    this.endElement.lines.push(line);\r\n  } else {\r\n    line.endElement = this;\r\n    this.lines.push(line);\r\n  }\r\n\r\n  const points = line.points;\r\n  points[points.length - 1] = point;\r\n  line.attr({\r\n    points: points\r\n  });\r\n\r\n  line.endSin = sin;\r\n  line.endCos = cos;\r\n}\r\n\r\nexport { BaseLinkable };\r\n","import { createElement, platformEnum, typeEnum } from \"..\";\r\nimport { lastItem, mixin } from \"../helpers\";\r\nimport { BaseLinkable } from \"./BaseLinkable\";\r\n\r\nfunction PolylineLinkable() {\r\n  BaseLinkable.call(this);\r\n}\r\n\r\nPolylineLinkable.prototype = {\r\n  constructor: PolylineLinkable,\r\n\r\n  addDrawPolyLine() {\r\n    BaseLinkable.prototype.addDrawLinkLine.call(this);\r\n    this.makeLinkLine = PolylineLinkable.prototype.makeLinkLine;\r\n    this.lineDrawing = PolylineLinkable.prototype.lineDrawing;\r\n  },\r\n\r\n  makeLinkLine(e) {\r\n    const { point, sin, cos } = this.makeLineStartPoint([e.offsetX, e.offsetY]);\r\n    const line = createElement({\r\n      type: typeEnum.polyline,\r\n      platform: platformEnum.svg,\r\n      points: [point]\r\n    });\r\n    return { line, sin, cos };\r\n  },\r\n\r\n  // Interface 画线过程中\r\n  lineDrawing(e) {\r\n    const root = this.root;\r\n    const curDrawLine = root.curDrawLine;\r\n    if (!curDrawLine) return;\r\n    const points = curDrawLine.points;\r\n    if (root.isNewPoint) {\r\n      root.isNewPoint = false;\r\n      points.push([e.offsetX, e.offsetY]);\r\n    } else {\r\n      const last = lastItem(points, 2);\r\n      root.isCurLineVertical = Math.abs(e.offsetY - last[1]) > Math.abs(e.offsetX - last[0]);\r\n      points[points.length - 1] = root.isCurLineVertical ? [last[0], e.offsetY - 1] : [e.offsetX - 1, last[1]];\r\n    }\r\n    curDrawLine.mapToView();\r\n  }\r\n};\r\n\r\nmixin(PolylineLinkable, BaseLinkable);\r\n\r\nexport { PolylineLinkable };\r\n","import { mixin } from \"../helpers\";\r\nimport { BaseLinkable } from \"./BaseLinkable\";\r\nimport { createElement, platformEnum, typeEnum } from \"..\";\r\n\r\nfunction LineLinkable() {\r\n  BaseLinkable.call(this);\r\n}\r\n\r\nLineLinkable.prototype = {\r\n  constructor: LineLinkable,\r\n\r\n  addDrawLine() {\r\n    BaseLinkable.prototype.addDrawLinkLine.call(this);\r\n    this.makeLinkLine = LineLinkable.prototype.makeLinkLine;\r\n    this.lineDrawing = LineLinkable.prototype.lineDrawing;\r\n  },\r\n\r\n  makeLinkLine(e) {\r\n    const {\r\n      point: [x, y],\r\n      sin,\r\n      cos\r\n    } = this.makeLineStartPoint([e.offsetX, e.offsetY]);\r\n    const line = createElement({\r\n      type: typeEnum.line,\r\n      platform: platformEnum.svg,\r\n      points: [\r\n        [x, y],\r\n        [x, y]\r\n      ]\r\n    });\r\n    return { line, sin, cos };\r\n  },\r\n\r\n  // Interface 画线过程中\r\n  lineDrawing(e) {\r\n    const root = this.root;\r\n    const curDrawLine = root.curDrawLine;\r\n    if (!curDrawLine) return;\r\n    const points = curDrawLine.points;\r\n    points[1] = [e.offsetX - 1, e.offsetY - 1];\r\n    curDrawLine.attr({\r\n      points\r\n    });\r\n  }\r\n};\r\n\r\nmixin(LineLinkable, BaseLinkable);\r\n\r\nexport { LineLinkable };\r\n","import { PolylineLinkable } from \"./PolylineLinkable\";\r\nimport { mixin } from \"../helpers\";\r\nimport { LineLinkable } from \"./LineLinkable\";\r\n\r\n// 容器的抽象类 混入此类的类可以添加children 可以添加连接线\r\nfunction Container(opts) {\r\n  PolylineLinkable.call(this, opts);\r\n  LineLinkable.call(this, opts);\r\n  this.children = [];\r\n}\r\n\r\nContainer.prototype = {\r\n  constructor: Container,\r\n\r\n  isContainer: true,\r\n\r\n  update() {\r\n    this.updateLines();\r\n    this.children.forEach(child => {\r\n      child.syncWithParent();\r\n    });\r\n  },\r\n\r\n  addChild(child) {\r\n    this.children.push(child);\r\n    child.addToParent(this);\r\n  },\r\n\r\n  removeChild(child) {\r\n    const idx = this.children.findIndex(d => d === child);\r\n    if (idx !== -1) {\r\n      this.children.splice(idx, 1);\r\n    }\r\n  },\r\n\r\n  mount(root) {\r\n    this.children.forEach(element => {\r\n      element.mount(root);\r\n    });\r\n  },\r\n\r\n  unmount() {\r\n    this.children.forEach(element => {\r\n      element.unmount();\r\n    });\r\n    this.clearLine();\r\n  },\r\n\r\n  export() {\r\n    return {\r\n      children: this.children.map(element => {\r\n        return element.export();\r\n      })\r\n    };\r\n  }\r\n};\r\n\r\nmixin(Container, PolylineLinkable);\r\nmixin(Container, LineLinkable);\r\n\r\nexport { Container };\r\n","import { createElement } from \"../index\";\r\nimport { typeEnum } from \"../enums\";\r\n\r\nfunction Resizable() {\r\n  this.vertexes = [];\r\n}\r\n\r\nResizable.prototype = {\r\n  constructor: Resizable,\r\n\r\n  addResize() {\r\n    const mousedown = e => {\r\n      e.event.stopPropagation();\r\n\r\n      if (this.root.curResizeElement !== this) {\r\n        this.root.curResizeElement?.onblur();\r\n        this.root.curResizeElement = this;\r\n        this.addVertexes();\r\n      }\r\n\r\n      this.onfocus([e.offsetX, e.offsetY]);\r\n    };\r\n    this.on(\"mousedown\", mousedown);\r\n    this.removeResize = () => {\r\n      this.off(\"mousedown\", mousedown);\r\n      this.onblur();\r\n    };\r\n  },\r\n\r\n  addVertexes() {\r\n    this.makeRectVertexes().forEach((point, index) => {\r\n      this.insertVertex(index, point);\r\n    });\r\n  },\r\n\r\n  // 插入顶点 Vertex 元素 不是插入points\r\n  insertVertex(index, point) {\r\n    const vertex = createElement({\r\n      type: typeEnum.vertex,\r\n      platform: this.platform,\r\n      x: point[0],\r\n      y: point[1],\r\n      index\r\n    });\r\n    vertex.addToParent(this);\r\n    this.vertexes.splice(index, 0, vertex);\r\n  },\r\n\r\n  // Interface\r\n  makeRectVertexes() {\r\n    return [];\r\n  },\r\n\r\n  // Interface\r\n  onfocus() {},\r\n\r\n  onblur() {\r\n    this.vertexes.forEach(vertex => {\r\n      vertex.unmount();\r\n    });\r\n    this.vertexes = [];\r\n    // 失去焦点时调用关联元素的 onblur\r\n    this.lines?.forEach(line => {\r\n      line.onblur?.();\r\n    });\r\n  },\r\n\r\n  syncWidthVertex(vertex) {\r\n    this.updateShapeByVertex(vertex);\r\n    // this.updateVertexes();\r\n  },\r\n\r\n  // Interface\r\n  updateShapeByVertex() {},\r\n\r\n  updateVertexes() {\r\n    if (!this.vertexes.length) return;\r\n    this.makeRectVertexes().forEach((point, index) => {\r\n      const vertex = this.vertexes[index];\r\n      vertex.x = point[0];\r\n      vertex.y = point[1];\r\n      vertex.mapToView();\r\n    });\r\n  }\r\n};\r\n\r\nexport { Resizable };\r\n","import { Element } from \"../Element\";\r\nimport { typeEnum } from \"../enums\";\r\nimport { extend, mixin } from \"../helpers\";\r\nimport { Draggable } from \"../mixins/Draggable\";\r\nimport { Container } from \"../mixins/Container\";\r\nimport { Resizable } from \"@/core/mixins/Resizable\";\r\n\r\nfunction BaseRect(opts) {\r\n  Element.call(this, opts);\r\n  Container.call(this, opts);\r\n  Resizable.call(this, opts);\r\n}\r\n\r\nBaseRect.prototype = {\r\n  constructor: BaseRect,\r\n\r\n  type: typeEnum.rect,\r\n\r\n  width: 200,\r\n\r\n  height: 100,\r\n\r\n  r: 4,\r\n\r\n  hasImage: false,\r\n\r\n  mount(root) {\r\n    Element.prototype.mount.call(this, root);\r\n    Container.prototype.mount.call(this, root);\r\n  },\r\n\r\n  update() {\r\n    Element.prototype.update.call(this);\r\n    Container.prototype.update.call(this);\r\n    Resizable.prototype.updateVertexes.call(this);\r\n  },\r\n\r\n  unmount() {\r\n    Element.prototype.unmount.call(this);\r\n    Container.prototype.unmount.call(this);\r\n  },\r\n\r\n  makeRectVertexes() {\r\n    return makeRectVertexes.call(this);\r\n  },\r\n\r\n  updateShapeByVertex(vertex) {\r\n    this.attr(\r\n      [resizeRectLT, resizeRectT, resizeRectRT, resizeRectR, resizeRectRB, resizeRectB, resizeRectLB, resizeRectL][vertex.index].call(this, vertex)\r\n    );\r\n  },\r\n\r\n  makeLineStartPoint(point) {\r\n    return makeLineStartPoint.call(this, point);\r\n  },\r\n\r\n  makeLineEndPoint(point1, point2) {\r\n    return makeLineEndPoint.call(this, point1, point2);\r\n  },\r\n\r\n  makeLineVertexByAngle(sin, cos) {\r\n    return makeLineVertexByAngle.call(this, sin, cos);\r\n  },\r\n\r\n  export() {\r\n    return {\r\n      ...Element.prototype.export.call(this),\r\n      ...Container.prototype.export.call(this),\r\n      width: this.width,\r\n      height: this.height,\r\n      r: this.r,\r\n      image: this.image\r\n    };\r\n  }\r\n};\r\n\r\nextend(BaseRect, Element);\r\nmixin(BaseRect, Draggable);\r\nmixin(BaseRect, Container);\r\nmixin(BaseRect, Resizable);\r\n\r\nfunction makeRectVertexes() {\r\n  const halfW = this.width / 2;\r\n  const halfH = this.height / 2;\r\n  return [\r\n    [this.x, this.y],\r\n    [this.x + halfW, this.y],\r\n    [this.x + this.width, this.y],\r\n    [this.x + this.width, this.y + halfH],\r\n    [this.x + this.width, this.y + this.height],\r\n    [this.x + halfW, this.y + this.height],\r\n    [this.x, this.y + this.height],\r\n    [this.x, this.y + halfH]\r\n  ];\r\n}\r\n\r\nfunction makeLineVertexByAngle(sin, cos) {\r\n  const centerX = this.x + this.width / 2;\r\n  const centerY = this.y + this.height / 2;\r\n\r\n  let r1 = Math.abs(this.width / 2 / cos);\r\n  let r2 = Math.abs(this.height / 2 / sin);\r\n\r\n  let x;\r\n  let y;\r\n  if (r1 > r2) {\r\n    x = centerX + r2 * cos;\r\n    y = centerY + r2 * sin;\r\n  } else {\r\n    x = centerX + r1 * cos;\r\n    y = centerY + r1 * sin;\r\n  }\r\n\r\n  return [x, y];\r\n}\r\n\r\nfunction makeLineStartPoint([x, y]) {\r\n  const centerX = this.x + this.width / 2;\r\n  const centerY = this.y + this.height / 2;\r\n\r\n  const er = Math.sqrt((x - centerX) ** 2 + (y - centerY) ** 2);\r\n  const sin = (y - centerY) / er;\r\n  const cos = (x - centerX) / er;\r\n\r\n  return { point: makeLineVertexByAngle.call(this, sin, cos), sin, cos };\r\n}\r\n\r\nfunction makeLineEndPoint(point1, point2) {\r\n  const point = calcLineCross.call(this, point1, point2);\r\n\r\n  if (!point) return;\r\n  const center = [this.x + this.width / 2, this.y + this.height / 2];\r\n  const r = Math.sqrt((point[0] - center[0]) ** 2 + (point[1] - center[1]) ** 2);\r\n\r\n  const sin = (point[1] - center[1]) / r;\r\n  const cos = (point[0] - center[0]) / r;\r\n\r\n  return { point: point, sin, cos };\r\n}\r\n\r\n// 计算直线与矩形的交点\r\nfunction calcLineCross([x1, y1], [x2, y2]) {\r\n  if (x1 === x2) {\r\n    if (x1 < this.x || x1 > this.x + this.width) return;\r\n    if (y1 < this.y) {\r\n      return [x1, this.y];\r\n    } else {\r\n      return [x1, this.y + this.height];\r\n    }\r\n  } else {\r\n    // y = k * x + b\r\n    const k = (y2 - y1) / (x2 - x1);\r\n    const b = y1 - k * x1;\r\n    const cross1 = [(this.y - b) / k, this.y]; // 上边交点\r\n    if (y1 < this.y && cross1[0] >= this.x && cross1[0] <= this.x + this.width) {\r\n      return cross1;\r\n    }\r\n    const cross2 = [this.x + this.width, k * (this.x + this.width) + b]; // 右边交点\r\n    if (x1 > this.x + this.width && cross2[1] >= this.y && cross2[1] <= this.y + this.height) {\r\n      return cross2;\r\n    }\r\n    const cross3 = [(this.y + this.height - b) / k, this.y + this.height]; // 下边交点\r\n    if (y1 > this.y + this.height && cross3[0] >= this.x && cross3[0] <= this.x + this.width) {\r\n      return cross3;\r\n    }\r\n    const cross4 = [this.x, k * this.x + b]; // 左边交点\r\n    if (x1 < this.x && cross4[1] >= this.y && cross4[1] <= this.y + this.height) {\r\n      return cross4;\r\n    }\r\n  }\r\n}\r\n\r\n// 左上\r\nfunction resizeRectLT(vertex) {\r\n  return {\r\n    x: vertex.x,\r\n    y: vertex.y,\r\n    width: this.width + this.x - vertex.x,\r\n    height: this.height + this.y - vertex.y\r\n  };\r\n}\r\n\r\n// 上\r\nfunction resizeRectT(vertex) {\r\n  return {\r\n    y: vertex.y,\r\n    height: this.height + this.y - vertex.y\r\n  };\r\n}\r\n\r\n// 右上\r\nfunction resizeRectRT(vertex) {\r\n  return {\r\n    width: vertex.x - this.x,\r\n    y: vertex.y,\r\n    height: this.height + this.y - vertex.y\r\n  };\r\n}\r\n\r\n// 右\r\nfunction resizeRectR(vertex) {\r\n  return {\r\n    width: vertex.x - this.x\r\n  };\r\n}\r\n\r\n// 右下\r\nfunction resizeRectRB(vertex) {\r\n  return {\r\n    width: vertex.x - this.x,\r\n    height: vertex.y - this.y\r\n  };\r\n}\r\n\r\n// 下\r\nfunction resizeRectB(vertex) {\r\n  return {\r\n    height: vertex.y - this.y\r\n  };\r\n}\r\n\r\n// 左下\r\nfunction resizeRectLB(vertex) {\r\n  return {\r\n    x: vertex.x,\r\n    width: this.width + this.x - vertex.x,\r\n    height: vertex.y - this.y\r\n  };\r\n}\r\n\r\n// 左\r\nfunction resizeRectL(vertex) {\r\n  return {\r\n    x: vertex.x,\r\n    width: this.width + this.x - vertex.x\r\n  };\r\n}\r\n\r\nexport { BaseRect };\r\n","import { BaseRect } from \"../BaseRect\";\r\nimport { platformEnum } from \"../../enums\";\r\nimport { createSvgNode, extend, fixZrCoordinate } from \"../../helpers\";\r\n\r\nfunction RectSvg(opts) {\r\n  BaseRect.call(this, opts);\r\n}\r\n\r\nRectSvg.prototype = {\r\n  constructor: RectSvg,\r\n\r\n  platform: platformEnum.svg,\r\n\r\n  create() {\r\n    this.el = createSvgNode(\"g\");\r\n    this.el.setAttribute(\"fill\", \"rgba(0,0,0,0)\");\r\n    this.el.setAttribute(\"stroke-width\", 1);\r\n    this.el.setAttribute(\"stroke\", \"rgb(0,0,0)\");\r\n    this.el.setAttribute(\"x\", \"rgb(0,0,0)\");\r\n    this.el.style.cursor = \"pointer\";\r\n\r\n    if (!this.preview) {\r\n      this.rectEl = createSvgNode(\"rect\");\r\n\r\n      this.el.appendChild(this.rectEl);\r\n    }\r\n\r\n    this.toggleImage();\r\n\r\n    this.foreignObjectElement = createSvgNode(\"foreignObject\");\r\n\r\n    this.el.insertBefore(this.foreignObjectElement, this.rectEl);\r\n\r\n    const div = document.createElement(\"div\");\r\n    this.foreignObjectElement.appendChild(div);\r\n    div.style.height = \"100%\";\r\n    div.style.overflow = \"auto\";\r\n    // this.domHost = document.createElement(\"div\");\r\n    // div.appendChild(this.domHost);\r\n\r\n    this.domHost = div;\r\n\r\n    this.mapToView();\r\n  },\r\n\r\n  mapToView() {\r\n    this.toggleImage();\r\n\r\n    setShape.call(this, this.rectEl);\r\n    setShape.call(this, this.foreignObjectElement);\r\n    setShape.call(this, this.imageEl);\r\n  },\r\n\r\n  toggleImage() {\r\n    if (this.hasImage !== !!this.image) {\r\n      if (this.imageEl) {\r\n        this.el.removeChild(this.imageEl);\r\n      } else {\r\n        this.imageEl = createSvgNode(\"image\");\r\n        this.imageEl.setAttribute(\"preserveAspectRatio\", \"none\");\r\n        this.imageEl.setAttribute(\"href\", this.image);\r\n        this.el.insertBefore(this.imageEl, this.rectEl);\r\n      }\r\n    }\r\n    this.hasImage = !!this.image;\r\n  }\r\n};\r\n\r\nextend(RectSvg, BaseRect);\r\n\r\nfunction setShape(el) {\r\n  if (!el) return;\r\n  el.setAttribute(\"x\", fixZrCoordinate(this.x + (this.width < 0 ? this.width : 0)));\r\n  el.setAttribute(\"y\", fixZrCoordinate(this.y + (this.height < 0 ? this.height : 0)));\r\n  el.setAttribute(\"width\", Math.abs(this.width));\r\n  el.setAttribute(\"height\", Math.abs(this.height));\r\n}\r\n\r\nexport { RectSvg };\r\n","import { Element } from \"../Element\";\r\nimport { typeEnum } from \"../enums\";\r\nimport { extend } from \"../helpers\";\r\n\r\nfunction BaseVertex(opts) {\r\n  Element.call(this, opts);\r\n}\r\n\r\nBaseVertex.prototype = {\r\n  constructor: BaseVertex,\r\n\r\n  type: typeEnum.vertex,\r\n\r\n  r: 4,\r\n\r\n  borderWidth: 1,\r\n\r\n  fill: \"#fff\",\r\n\r\n  hasImage: false,\r\n\r\n  index: 0,\r\n\r\n  update() {\r\n    Element.prototype.update.call(this);\r\n    this.parent.syncWidthVertex(this);\r\n  },\r\n\r\n  export() {}\r\n};\r\n\r\nextend(BaseVertex, Element);\r\n\r\nexport { BaseVertex };\r\n","import { createSvgNode, fixZrCoordinate } from \"../helpers\";\r\n\r\nfunction CircleImplSvg() {}\r\n\r\nCircleImplSvg.prototype = {\r\n  constructor: CircleImplSvg,\r\n\r\n  create() {\r\n    const el = (this.el = createSvgNode(\"g\"));\r\n\r\n    this.circleEl = createSvgNode(\"circle\");\r\n    this.circleEl.setAttribute(\"id\", \"aaa\");\r\n\r\n    el.appendChild(this.circleEl);\r\n\r\n    this.mapToView();\r\n  },\r\n\r\n  mapToView() {\r\n    this.toggleImage();\r\n\r\n    const x = fixZrCoordinate(this.x);\r\n    const y = fixZrCoordinate(this.y);\r\n\r\n    this.circleEl.setAttribute(\"cx\", x);\r\n    this.circleEl.setAttribute(\"cy\", y);\r\n    this.circleEl.setAttribute(\"r\", Math.abs(this.r));\r\n    this.circleEl.setAttribute(\"fill\", this.fill);\r\n    this.circleEl.setAttribute(\"stroke-width\", 1);\r\n    this.circleEl.setAttribute(\"stroke\", \"rgb(0,0,0)\");\r\n    this.circleEl.style.cursor = \"pointer\";\r\n\r\n    if (this.imageEl) {\r\n      this.imageEl.setAttribute(\"x\", x - this.r);\r\n      this.imageEl.setAttribute(\"y\", y - this.r);\r\n      this.imageEl.setAttribute(\"width\", Math.abs(2 * this.r));\r\n      this.imageEl.setAttribute(\"height\", Math.abs(2 * this.r));\r\n    }\r\n\r\n    if (this.clipCircle) {\r\n      this.clipCircle.setAttribute(\"cx\", x);\r\n      this.clipCircle.setAttribute(\"cy\", y);\r\n      this.clipCircle.setAttribute(\"r\", Math.abs(this.r));\r\n    }\r\n  },\r\n\r\n  toggleImage() {\r\n    if (this.hasImage !== !!this.image) {\r\n      if (this.imageEl) {\r\n        this.el.removeChild(this.imageEl);\r\n      } else {\r\n        const defs = createSvgNode(\"defs\");\r\n        this.el.insertBefore(defs, this.circleEl);\r\n        this.clipPath = createSvgNode(\"clipPath\");\r\n        this.clipPath.setAttribute(\"id\", `${this.id}-clipPath`);\r\n        this.clipCircle = createSvgNode(\"circle\");\r\n        this.clipPath.appendChild(this.clipCircle);\r\n        defs.appendChild(this.clipPath);\r\n\r\n        this.imageEl = createSvgNode(\"image\");\r\n        this.imageEl.setAttribute(\"clip-path\", `url(#${this.id}-clipPath)`);\r\n        this.imageEl.setAttribute(\"preserveAspectRatio\", \"none\");\r\n        this.imageEl.setAttribute(\"href\", this.image);\r\n        this.el.insertBefore(this.imageEl, this.circleEl);\r\n      }\r\n    }\r\n    this.hasImage = !!this.image;\r\n  }\r\n};\r\n\r\nexport { CircleImplSvg };\r\n","import { BaseVertex } from \"../BaseVertex\";\r\nimport { extend, mixin } from \"../../helpers\";\r\nimport { platformEnum } from \"../../enums\";\r\nimport { CircleImplSvg } from \"../../mixins/CircleImplSvg\";\r\n\r\nfunction VertexSvg(opts) {\r\n  BaseVertex.call(this, opts);\r\n  CircleImplSvg.call(this, opts);\r\n}\r\n\r\nVertexSvg.prototype = {\r\n  constructor: VertexSvg,\r\n\r\n  platform: platformEnum.svg,\r\n\r\n  fill: \"#fff\"\r\n};\r\n\r\nextend(VertexSvg, BaseVertex);\r\nmixin(VertexSvg, CircleImplSvg);\r\n\r\nexport { VertexSvg };\r\n","import { Element } from \"../Element\";\r\nimport { typeEnum } from \"../enums\";\r\nimport { extend, mixin } from \"../helpers\";\r\nimport { Container } from \"../mixins/Container\";\r\nimport { Resizable } from \"@/core/mixins/Resizable\";\r\n\r\nfunction BaseCircle(opts) {\r\n  Element.call(this, opts);\r\n  Container.call(this, opts);\r\n  Resizable.call(this, opts);\r\n}\r\n\r\nBaseCircle.prototype = {\r\n  constructor: BaseCircle,\r\n\r\n  type: typeEnum.circle,\r\n\r\n  r: 30,\r\n\r\n  borderWidth: 1,\r\n\r\n  hasImage: false,\r\n\r\n  mount(root) {\r\n    Element.prototype.mount.call(this, root);\r\n    Container.prototype.mount.call(this, root);\r\n  },\r\n\r\n  update() {\r\n    Element.prototype.update.call(this);\r\n    Container.prototype.update.call(this);\r\n    Resizable.prototype.updateVertexes.call(this);\r\n  },\r\n\r\n  makeRectVertexes() {\r\n    return makeRectVertexes.call(this);\r\n  },\r\n\r\n  updateShapeByVertex(vertex) {\r\n    this.attr([resizeT, resizeR, resizeB, resizeL][vertex.index].call(this, vertex));\r\n  },\r\n\r\n  makeLineStartPoint(point) {\r\n    return makeLineStartPoint.call(this, point);\r\n  },\r\n\r\n  makeLineEndPoint(point1, point2) {\r\n    return makeLineEndPoint.call(this, point1, point2);\r\n  },\r\n\r\n  makeLineVertexByAngle(sin, cos) {\r\n    return makeLineVertexByAngle.call(this, sin, cos);\r\n  },\r\n\r\n  unmount() {\r\n    Element.prototype.unmount.call(this);\r\n    Container.prototype.clearLine.call(this);\r\n  },\r\n\r\n  export() {\r\n    return {\r\n      ...Element.prototype.export.call(this),\r\n      ...Container.prototype.export.call(this),\r\n      r: this.r,\r\n      image: this.image\r\n    };\r\n  }\r\n};\r\n\r\nextend(BaseCircle, Element);\r\nmixin(BaseCircle, Container);\r\nmixin(BaseCircle, Resizable);\r\n\r\nfunction makeRectVertexes() {\r\n  return [\r\n    [this.x, this.y - this.r],\r\n    [this.x + this.r, this.y],\r\n    [this.x, this.y + this.r],\r\n    [this.x - this.r, this.y]\r\n  ];\r\n}\r\n\r\n// 通过角度确定线在连接元素上的交点\r\nfunction makeLineVertexByAngle(sin, cos) {\r\n  const r = Math.abs(this.r);\r\n  const x = this.x + r * cos;\r\n  const y = this.y + r * sin;\r\n  return [x, y];\r\n}\r\n\r\nfunction makeLineStartPoint([x, y]) {\r\n  const er = Math.sqrt((x - this.x) ** 2 + (y - this.y) ** 2);\r\n\r\n  const sin = (y - this.y) / er;\r\n  const cos = (x - this.x) / er;\r\n\r\n  return { point: makeLineVertexByAngle.call(this, sin, cos), sin, cos };\r\n}\r\n\r\nfunction makeLineEndPoint(point1, point2) {\r\n  const point = calcLineCross.call(this, point1, point2);\r\n\r\n  if (!point) return;\r\n  const sin = (point[1] - this.y) / this.r;\r\n  const cos = (point[0] - this.x) / this.r;\r\n\r\n  return { point: makeLineVertexByAngle.call(this, sin, cos), sin, cos };\r\n}\r\n\r\nfunction calcLineCross([x1, y1], [x2, y2]) {\r\n  if (x1 === x2) {\r\n    if (y1 < this.y - this.r) {\r\n      return [x1, this.y - Math.sqrt(this.r ** 2 - (this.x - x1) ** 2)];\r\n    } else {\r\n      return [x1, this.y + Math.sqrt(this.r ** 2 - (this.x - x1) ** 2)];\r\n    }\r\n  }\r\n  const k = (y2 - y1) / (x2 - x1);\r\n  const b = y1 - k * x1;\r\n  const c = -this.x;\r\n  const d = -this.y;\r\n  const r = this.r;\r\n\r\n  const sqrt = Math.sqrt((k ** 2 + 1) * r ** 2 - c ** 2 * k ** 2 + 2 * c * (b + d) * k - d ** 2 - 2 * b * d - b ** 2);\r\n  const a2 = k ** 2 + 1;\r\n  const b1 = (b + d) * k + c;\r\n\r\n  const x11 = -(b1 + sqrt) / a2;\r\n  const y11 = k * x11 + b;\r\n  if (x1 < x11) {\r\n    return [x11, y11];\r\n  }\r\n  const x22 = -(b1 - sqrt) / a2;\r\n  const y22 = k * x22 + b;\r\n  if (x1 > x22) {\r\n    return [x22, y22];\r\n  }\r\n}\r\n\r\nfunction resizeT(vertex) {\r\n  const r = (this.y + this.r - vertex.y) / 2;\r\n  return {\r\n    y: this.y + this.r - r,\r\n    r: r\r\n  };\r\n}\r\n\r\nfunction resizeR(vertex) {\r\n  const r = (vertex.x - this.x + this.r) / 2;\r\n  return {\r\n    r: r,\r\n    x: this.x - this.r + r\r\n  };\r\n}\r\n\r\nfunction resizeB(vertex) {\r\n  const r = (vertex.y - this.y + this.r) / 2;\r\n  return {\r\n    r: r,\r\n    y: this.y - this.r + r\r\n  };\r\n}\r\n\r\nfunction resizeL(vertex) {\r\n  const r = (this.x + this.r - vertex.x) / 2;\r\n  return {\r\n    x: this.x + this.r - r,\r\n    r: r\r\n  };\r\n}\r\n\r\nexport { BaseCircle };\r\n","import { Circle as ZRCircle, Image as ZRImage } from \"zrender\";\r\n\r\nfunction CircleImplZR() {}\r\n\r\nCircleImplZR.prototype = {\r\n  constructor: CircleImplZR,\r\n\r\n  create() {\r\n    const circle = new ZRCircle({\r\n      shape: makeCircleShape(this),\r\n      style: {\r\n        lineWidth: 1,\r\n        stroke: \"#000\",\r\n        text: \"\",\r\n        fontSize: 16,\r\n        textFill: \"#999\",\r\n        fill: this.fill\r\n      }\r\n    });\r\n\r\n    this.el = this.image\r\n      ? new ZRImage({\r\n          style: makeImageStyle(this)\r\n        })\r\n      : circle;\r\n\r\n    if (this.image) {\r\n      this.el.clipPath = circle;\r\n      this.el.setClipPath(circle);\r\n    }\r\n\r\n    this.hasImage = !!this.image;\r\n  },\r\n\r\n  mapToView() {\r\n    if (this.hasImage !== !!this.image) {\r\n      this.toggleImage();\r\n      this.hasImage = true;\r\n      return;\r\n    }\r\n\r\n    const circle = this.image ? this.el.clipPath : this.el;\r\n\r\n    circle.setShape(makeCircleShape(this));\r\n\r\n    if (this.image) {\r\n      this.image && this.el.setStyle(makeImageStyle(this));\r\n    }\r\n  }\r\n};\r\n\r\nfunction makeCircleShape(circle) {\r\n  return {\r\n    cx: circle.x + 0.5,\r\n    cy: circle.y + 0.5,\r\n    r: Math.abs(circle.r)\r\n  };\r\n}\r\n\r\nfunction makeImageStyle(circle) {\r\n  return {\r\n    x: circle.x - circle.r,\r\n    y: circle.y - circle.r,\r\n    width: circle.r * 2,\r\n    height: circle.r * 2,\r\n    image: circle.image\r\n  };\r\n}\r\n\r\nexport { CircleImplZR };\r\n","import { platformEnum } from \"../../enums\";\r\nimport { extend, mixin } from \"../../helpers\";\r\nimport { BaseCircle } from \"../BaseCircle\";\r\nimport { CircleImplZR } from \"../../mixins/CircleImplZR\";\r\nimport { CircleImplSvg } from \"../../mixins/CircleImplSvg\";\r\n\r\nfunction CircleSvg(opts) {\r\n  BaseCircle.call(this, opts);\r\n  CircleImplZR.call(this, opts);\r\n}\r\n\r\nCircleSvg.prototype = {\r\n  constructor: CircleSvg,\r\n\r\n  platform: platformEnum.svg,\r\n\r\n  fill: \"rgba(0, 0, 0, 0)\"\r\n};\r\n\r\nextend(CircleSvg, BaseCircle);\r\nmixin(CircleSvg, CircleImplSvg);\r\n\r\nexport { CircleSvg };\r\n","import { Element } from \"../Element\";\r\nimport { extend, handleKeyEvent, lastItem, mixin } from \"../helpers\";\r\nimport { typeEnum } from \"../enums\";\r\nimport { createElement } from \"../createElement\";\r\nimport { Resizable } from \"@/core/mixins/Resizable\";\r\n\r\n// 所有连接线的抽象类\r\nfunction BaseLinkLine(opts) {\r\n  Element.call(this, opts);\r\n  Resizable.call(this, opts);\r\n  this.zIndex = opts.zIndex || 0;\r\n}\r\n\r\nBaseLinkLine.prototype = {\r\n  constructor: BaseLinkLine,\r\n\r\n  points: [],\r\n\r\n  isLinkLine: true,\r\n\r\n  useArrow: false,\r\n\r\n  create() {\r\n    this.useArrow && this.addArrow();\r\n  },\r\n\r\n  mount(root) {\r\n    Element.prototype.mount.call(this, root);\r\n    this.arrow && this.arrow.mount(this.root);\r\n  },\r\n\r\n  unmount() {\r\n    Element.prototype.unmount.call(this);\r\n    this.startElement.removeLine(this);\r\n    // 绘制过程中被移除时没有 endElement\r\n    this.endElement?.removeLine(this);\r\n    this.removeArrow();\r\n  },\r\n\r\n  update() {\r\n    Element.prototype.update.call(this);\r\n    this.updateVertexes();\r\n    this.useArrow ? this.addArrow() : this.removeArrow();\r\n    this.arrow?.asyncWithLine();\r\n  },\r\n\r\n  // Interface 返回表示线的方向的两个点\r\n  makeDirectionPoints() {},\r\n\r\n  addArrow() {\r\n    if (this.arrow) return;\r\n    const [start, end] = this.makeDirectionPoints();\r\n    this.arrow = createElement({\r\n      type: typeEnum.arrow,\r\n      platform: this.platform,\r\n      x: end[0],\r\n      y: end[1],\r\n      rotation: calcRotation(start, end),\r\n      line: this\r\n    });\r\n    this.isMounted && this.arrow.mount(this.root);\r\n  },\r\n\r\n  makeRotation() {\r\n    const [start, end] = this.makeDirectionPoints();\r\n    return calcRotation(start, end);\r\n  },\r\n\r\n  removeArrow() {\r\n    if (!this.arrow || !this.arrow.isMounted) return;\r\n    this.arrow.unmount();\r\n  },\r\n\r\n  makeRectVertexes() {\r\n    return this.points;\r\n  },\r\n\r\n  updateShapeByVertex(vertex) {\r\n    this.updatePoint(vertex.index, [vertex.x, vertex.y]);\r\n  },\r\n\r\n  updatePoint(index, point) {\r\n    updatePoint.call(this, index, point);\r\n    this.update();\r\n  },\r\n\r\n  // 绘制过程中键盘控制\r\n  keyCtrlDrawing(e) {\r\n    handleKeyEvent(e, {\r\n      // ctrl + z\r\n      z: {\r\n        handler: () => {\r\n          this.root.isNewPoint = false;\r\n          if (this.points.length === 2) {\r\n            this.unmount();\r\n            this.root.offCurDrawLine();\r\n          } else {\r\n            this.points.pop();\r\n            this.mapToView();\r\n          }\r\n        },\r\n        modifier: {\r\n          ctrl: true\r\n        }\r\n      }\r\n    });\r\n  },\r\n\r\n  export() {\r\n    return {\r\n      ...Element.prototype.export.call(this),\r\n      points: this.points,\r\n      startId: this.startElement.id,\r\n      startSin: this.startSin,\r\n      startCos: this.startCos,\r\n      endId: this.endElement.id,\r\n      endSin: this.endSin,\r\n      endCos: this.endCos,\r\n      useArrow: this.useArrow,\r\n      isLinkLine: this.isLinkLine\r\n    };\r\n  }\r\n};\r\n\r\nextend(BaseLinkLine, Element);\r\nmixin(BaseLinkLine, Resizable);\r\n\r\nfunction calcRotation(p1, p2) {\r\n  return Math.atan2(p1[1] - p2[1], p2[0] - p1[0]) - Math.PI / 2;\r\n}\r\n\r\nexport function updatePoint(index, point) {\r\n  if (index === 0) {\r\n    // 起点\r\n    const newStart = this.startElement.makeLineStartPoint(point);\r\n    this.points[0] = newStart.point;\r\n    this.startSin = newStart.sin;\r\n    this.startCos = newStart.cos;\r\n  } else if (index === this.points.length - 1) {\r\n    // 终点\r\n    const newEnd = this.endElement.makeLineEndPoint(lastItem(this.points, 2), point);\r\n    if (newEnd) {\r\n      this.points[this.points.length - 1] = newEnd.point;\r\n      this.endSin = newEnd.sin;\r\n      this.endCos = newEnd.cos;\r\n    }\r\n  } else {\r\n    this.points[index] = point;\r\n  }\r\n}\r\n\r\nexport { BaseLinkLine };\r\n","import { typeEnum } from \"../enums\";\r\nimport { BaseLinkLine } from \"./BaseLinkLine\";\r\nimport { extend } from \"../helpers\";\r\n\r\nfunction BaseLine(opts) {\r\n  BaseLinkLine.call(this, opts);\r\n}\r\n\r\nBaseLine.prototype = {\r\n  constructor: BaseLine,\r\n\r\n  type: typeEnum.line,\r\n\r\n  points: [\r\n    [0, 0],\r\n    [0, 0]\r\n  ],\r\n\r\n  color: \"#000\",\r\n\r\n  useArrow: false,\r\n\r\n  makeDirectionPoints() {\r\n    return this.points;\r\n  },\r\n\r\n  export() {\r\n    return {\r\n      ...BaseLinkLine.prototype.export.call(this)\r\n    };\r\n  }\r\n};\r\n\r\nextend(BaseLine, BaseLinkLine);\r\n\r\nexport { BaseLine };\r\n","import { createSvgNode } from \"../../helpers\";\r\n\r\nexport function createAnimateNode(element) {\r\n  const animateNode = createSvgNode(\"circle\");\r\n  animateNode.setAttribute(\"r\", 4);\r\n  animateNode.setAttribute(\"fill\", \"#666\");\r\n\r\n  const animateMotion = createSvgNode(\"animateMotion\");\r\n  animateNode.appendChild(animateMotion);\r\n\r\n  // animateMotion.setAttribute(\"path\", makeAnimatePath(element));\r\n  animateMotion.setAttribute(\"begin\", \"0s\");\r\n  animateMotion.setAttribute(\"dur\", \"3s\");\r\n  animateMotion.setAttribute(\"repeatCount\", \"indefinite\");\r\n\r\n  element.animateMotion = animateMotion;\r\n  return animateNode;\r\n}\r\n\r\nexport function makeAnimatePath(element) {\r\n  const points = element.points;\r\n  const [x, y] = points[0];\r\n  return \"M\" + points.map(([x1, y1]) => [x1 - x, y1 - y].join(\",\")).join(\" L\");\r\n}\r\n","import { platformEnum } from \"../../enums\";\r\nimport { createSvgNode, extend, fixZrCoordinate } from \"../../helpers\";\r\nimport { BaseLine } from \"../BaseLine\";\r\nimport { createAnimateNode, makeAnimatePath } from \"./helpers\";\r\n\r\nfunction LineSvg(opts) {\r\n  BaseLine.call(this, opts);\r\n}\r\n\r\nLineSvg.prototype = {\r\n  constructor: LineSvg,\r\n\r\n  platform: platformEnum.svg,\r\n\r\n  create() {\r\n    BaseLine.prototype.create.call(this);\r\n\r\n    this.el = createSvgNode(\"g\");\r\n    this.el.style.cursor = \"pointer\";\r\n\r\n    this.lineEl = createSvgNode(\"line\");\r\n\r\n    this.el.appendChild(this.lineEl);\r\n\r\n    this.animateNode = createAnimateNode(this);\r\n    this.el.appendChild(this.animateNode);\r\n\r\n    this.mapToView();\r\n  },\r\n\r\n  mapToView() {\r\n    const [[x1, y1], [x2, y2]] = this.points;\r\n\r\n    this.lineEl.setAttribute(\"x1\", fixZrCoordinate(x1));\r\n    this.lineEl.setAttribute(\"y1\", fixZrCoordinate(y1));\r\n    this.lineEl.setAttribute(\"x2\", fixZrCoordinate(x2));\r\n    this.lineEl.setAttribute(\"y2\", fixZrCoordinate(y2));\r\n    this.lineEl.setAttribute(\"stroke\", this.color);\r\n    this.lineEl.setAttribute(\"stroke-width\", 1);\r\n\r\n    this.animateNode.setAttribute(\"cx\", x1);\r\n    this.animateNode.setAttribute(\"cy\", y1);\r\n    this.animateMotion.setAttribute(\"path\", makeAnimatePath(this));\r\n  }\r\n};\r\n\r\nextend(LineSvg, BaseLine);\r\n\r\nexport { LineSvg };\r\n","import { typeEnum } from \"../enums\";\r\nimport { extend, handleKeyEvent, lastItem, mixin } from \"../helpers\";\r\nimport { BaseLinkLine, updatePoint } from \"./BaseLinkLine\";\r\nimport { PolylineLinkable } from \"@/core/mixins/PolylineLinkable\";\r\n\r\nfunction BasePolyline(opts) {\r\n  BaseLinkLine.call(this, opts);\r\n  PolylineLinkable.call(this, opts);\r\n}\r\n\r\nBasePolyline.prototype = {\r\n  constructor: BasePolyline,\r\n\r\n  type: typeEnum.polyline,\r\n\r\n  points: [\r\n    [0, 0],\r\n    [0, 0]\r\n  ],\r\n\r\n  color: \"#000\",\r\n\r\n  useArrow: false,\r\n\r\n  focusIndex: -1, // 动态属性\r\n  focusPoint: null, // 触发获取焦点的坐标\r\n\r\n  update() {\r\n    nextVertexFollow.call(this);\r\n    BaseLinkLine.prototype.update.call(this);\r\n  },\r\n\r\n  makeDirectionPoints() {\r\n    const points = this.points;\r\n    return [lastItem(points, 2), lastItem(points)];\r\n  },\r\n\r\n  makeLineStartPoint() {\r\n    return { point: this.points[0], sin: this.startSin, cos: this.startCos };\r\n  },\r\n\r\n  // 获取\r\n  makeBeforeBreakPoints(p) {\r\n    const { index, point } = calcCrossIndex.call(this, p);\r\n    return [...this.points.slice(1, index + 1).map(p => [p[0], p[1]]), point];\r\n  },\r\n\r\n  makeLineEndPoint() {\r\n    return { point: lastItem(this.points), sin: this.endSin, cos: this.endCos };\r\n  },\r\n\r\n  makeAfterBreakPoints(p) {\r\n    const { index, point } = calcCrossIndex.call(this, p);\r\n    return [point, ...this.points.slice(index + 1).map(p => [p[0], p[1]])];\r\n  },\r\n\r\n  onfocus(p) {\r\n    focusPoint.call(this, p);\r\n  },\r\n\r\n  // 失去焦点时的逻辑处理\r\n  onblur() {\r\n    BaseLinkLine.prototype.onblur.call(this);\r\n    // 重置 focusIndex\r\n    this.focusIndex = -1;\r\n    this.focusPoint = null;\r\n    // 合并拐点\r\n    mergeBreakPoints(this.points);\r\n    // 合并拐点不会产生副作用，只需要重新映射一次视图\r\n    this.mapToView();\r\n  },\r\n\r\n  updateByKeydown(e) {\r\n    updateByKeydown.call(this, e);\r\n    BaseLinkLine.prototype.updateByKeydown.call(this, e);\r\n  },\r\n\r\n  updateShapeByVertex(vertex) {\r\n    this.focusIndex = vertex.index;\r\n    // 通过顶点更新 focusIndex 时需要重置 focusPoint\r\n    this.focusPoint = null;\r\n    BaseLinkLine.prototype.updateShapeByVertex.call(this, vertex);\r\n  },\r\n\r\n  updatePoint(index, point) {\r\n    if (this.points.length === 2) {\r\n      // 自动增加拐点\r\n      breakSection.call(this, 0);\r\n      if (index === 1) {\r\n        index += 2;\r\n      }\r\n    }\r\n    const focusIndex = this.focusIndex;\r\n    const points = this.points;\r\n    let isLeftVertical = points[focusIndex][0] === points[focusIndex - 1]?.[0];\r\n    let isRightVertical = points[focusIndex][0] === points[focusIndex + 1]?.[0];\r\n    // 重合时\r\n    if (isLeftVertical && isRightVertical) {\r\n      if (isLeftVertical && points[focusIndex][1] === points[focusIndex - 1]?.[1]) {\r\n        isLeftVertical = false;\r\n      }\r\n      if (isRightVertical && points[focusIndex][1] === points[focusIndex + 1]?.[1]) {\r\n        isRightVertical = false;\r\n      }\r\n    }\r\n    this.isRightVertical = isRightVertical;\r\n    this.isLeftVertical = isLeftVertical;\r\n    BaseLinkLine.prototype.updatePoint.call(this, index, point);\r\n  },\r\n\r\n  ondragstart([x, y]) {\r\n    const curPoint = this.points[this.focusIndex];\r\n    this.dragOffsetX = x - curPoint[0];\r\n    this.dragOffsetY = y - curPoint[1];\r\n  },\r\n\r\n  ondrag({ x, y }) {\r\n    updateSection.call(this, { x, y });\r\n  }\r\n};\r\n\r\nextend(BasePolyline, BaseLinkLine);\r\nmixin(BasePolyline, PolylineLinkable);\r\n\r\n// 与改变的点相连的点跟随\r\nfunction nextVertexFollow() {\r\n  const focusIndex = this.focusIndex;\r\n  if (focusIndex === -1) return;\r\n  const points = this.points;\r\n  if (focusIndex === 0) {\r\n    const point = points[1];\r\n    const first = points[0];\r\n    if (this.isRightVertical) {\r\n      point[0] = first[0];\r\n    } else {\r\n      point[1] = first[1];\r\n    }\r\n  } else if (focusIndex === points.length - 1) {\r\n    const last = lastItem(points);\r\n    const last2 = lastItem(points, 2);\r\n    if (this.isLeftVertical) {\r\n      last2[0] = last[0];\r\n    } else {\r\n      last2[1] = last[1];\r\n    }\r\n  } else {\r\n    if (focusIndex === 1) {\r\n      if (this.isLeftVertical) {\r\n        updatePoint.call(this, 0, [points[1][0], points[0][1]]);\r\n        points[1][0] = points[0][0];\r\n      } else {\r\n        updatePoint.call(this, 0, [points[0][0], points[1][1]]);\r\n        points[1][1] = points[0][1];\r\n      }\r\n    } else {\r\n      if (this.isLeftVertical) {\r\n        points[focusIndex - 1][0] = points[focusIndex][0];\r\n      } else {\r\n        points[focusIndex - 1][1] = points[focusIndex][1];\r\n      }\r\n    }\r\n    if (focusIndex === points.length - 2) {\r\n      if (this.isRightVertical) {\r\n        updatePoint.call(this, points.length - 1, [points[points.length - 2][0], points[points.length - 1][1]]);\r\n        points[points.length - 2][0] = points[points.length - 1][0];\r\n      } else {\r\n        updatePoint.call(this, points.length - 1, [points[points.length - 1][0], points[points.length - 2][1]]);\r\n        points[points.length - 2][1] = points[points.length - 1][1];\r\n      }\r\n    } else {\r\n      if (this.isRightVertical) {\r\n        points[focusIndex + 1][0] = points[focusIndex][0];\r\n      } else {\r\n        points[focusIndex + 1][1] = points[focusIndex][1];\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// 折断线段的某一小段\r\nfunction breakSection(index) {\r\n  const points = this.points;\r\n  const curIndex = index === points.length - 1 ? index - 1 : index;\r\n  if (isSectionVertical(points, curIndex)) {\r\n    const halfY = (points[curIndex][1] + points[curIndex + 1][1]) / 2;\r\n    insertPoints.call(this, curIndex + 1, [points[curIndex][0], halfY], [points[curIndex][0], halfY]);\r\n  } else {\r\n    const halfX = (points[curIndex][0] + points[curIndex + 1][0]) / 2;\r\n    insertPoints.call(this, curIndex + 1, [halfX, points[curIndex][1]], [halfX, points[curIndex][1]]);\r\n  }\r\n  // 如果有focusPoint, 根据focusPoint调整 focusIndex 的值\r\n  this.focusPoint && focusPoint.call(this, this.focusPoint);\r\n}\r\n\r\n// 插入点\r\nfunction insertPoints(index, ...points) {\r\n  this.points.splice(index, 0, ...points);\r\n  if (this.vertexes.length) {\r\n    // 插入时需要调整原来顶点的下标\r\n    for (let i = index; i < this.vertexes.length; i++) {\r\n      this.vertexes[i].index += points.length;\r\n    }\r\n    points.forEach((point, i) => {\r\n      this.insertVertex(index + i, point);\r\n    });\r\n  }\r\n  // 调整 focusIndex 的值\r\n  if (this.focusIndex !== -1 && this.focusIndex >= index) {\r\n    this.focusIndex += points.length;\r\n  }\r\n}\r\n\r\nfunction calcCrossIndex(p) {\r\n  const points = this.points;\r\n  let index = 0;\r\n  let curPoint;\r\n  let curDistance = Infinity;\r\n  for (let i = 0; i < points.length - 1; i++) {\r\n    const { distance, point } = calcDistance(points[i], points[i + 1], p);\r\n    if (curDistance > distance) {\r\n      curDistance = distance;\r\n      index = i;\r\n      curPoint = point;\r\n    }\r\n  }\r\n  return { index, point: curPoint };\r\n}\r\n\r\n// 计算点到线段的距离\r\nfunction calcDistance(a, b, p) {\r\n  const vAB = [b[0] - a[0], b[1] - a[1]];\r\n  const vAP = [p[0] - a[0], p[1] - a[1]];\r\n  const vBP = [p[0] - b[0], p[1] - b[1]];\r\n  const dotAB_AP = vAB[0] * vAP[0] + vAB[1] * vAP[1];\r\n  const dotAB_BP = vAB[0] * vBP[0] + vAB[1] * vBP[1];\r\n  if (dotAB_AP <= 0) {\r\n    // AP\r\n    return { distance: d(a, p), point: a };\r\n  } else if (dotAB_BP >= 0) {\r\n    // BP\r\n    return { distance: d(b, p), point: b };\r\n  } else {\r\n    // 点到直线\r\n    if (a[0] === b[0]) {\r\n      // 垂直\r\n      return { distance: (p[0] - a[0]) ** 2, point: [a[0], p[1]] };\r\n    } else if (a[1] === b[1]) {\r\n      // 水平\r\n      return { distance: (p[1] - a[1]) ** 2, point: [p[0], a[1]] };\r\n    } else {\r\n      // 普通倾斜直线 暂不实现\r\n      // y - (y2 - y1) * (x - x1) / (x2 - x1) - y1 = 0\r\n      // y - ( (y2 - y1) * x / (x2 - x1) - (y2 - y1) * x1 / (x2 - x1) ) - y1 = 0\r\n      // y - (y2 - y1) * x / (x2 - x1) + (y2 - y1) * x1 / (x2 - x1) - y1 = 0\r\n    }\r\n  }\r\n\r\n  function d(a, b) {\r\n    // 只需比较大小 不进行开平方操作\r\n    return (a[0] - b[0]) ** 2 + (a[1] - b[1]) ** 2;\r\n  }\r\n}\r\n\r\nfunction focusPoint(p) {\r\n  const { index } = calcCrossIndex.call(this, p);\r\n  this.focusIndex = index;\r\n  this.focusPoint = p;\r\n}\r\n\r\nfunction updateSection({ x, y }) {\r\n  const leftPoint = this.points[this.focusIndex];\r\n  // 判断是垂直还是水平\r\n  if (isSectionVertical(this.points, this.focusIndex)) {\r\n    this.updatePoint(this.focusIndex, [x, leftPoint[1]]);\r\n  } else {\r\n    this.updatePoint(this.focusIndex, [leftPoint[0], y]);\r\n  }\r\n}\r\n\r\nfunction updateByKeydown(e) {\r\n  const { focusIndex, points } = this;\r\n  let [x, y] = points[focusIndex];\r\n  const isVertical = isSectionVertical(points, focusIndex);\r\n  handleKeyEvent(e, {\r\n    ArrowUp: () => {\r\n      if (isVertical) return;\r\n      y--;\r\n      this.updatePoint(focusIndex, [x, y]);\r\n    },\r\n    ArrowRight: () => {\r\n      if (!isVertical) return;\r\n      x++;\r\n      this.updatePoint(focusIndex, [x, y]);\r\n    },\r\n    ArrowDown: () => {\r\n      if (isVertical) return;\r\n      y++;\r\n      this.updatePoint(focusIndex, [x, y]);\r\n    },\r\n    ArrowLeft: () => {\r\n      if (!isVertical) return;\r\n      x--;\r\n      this.updatePoint(focusIndex, [x, y]);\r\n    },\r\n    b: {\r\n      handler: () => {\r\n        breakSection.call(this, focusIndex);\r\n      },\r\n      modifiers: {\r\n        ctrl: true\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\n// 判断其中一段的方向\r\nfunction isSectionVertical(points, index) {\r\n  if (index === points.length - 1) {\r\n    index--;\r\n  }\r\n  const leftPoint = points[index];\r\n  const rightPoint = points[index + 1];\r\n  return leftPoint[0] === rightPoint[0];\r\n}\r\n\r\nfunction mergeBreakPoints(points) {\r\n  let curIndex = 1;\r\n  let equalsCountX = 0;\r\n  let equalsCountY = 0;\r\n  let x = points[0][0];\r\n  let y = points[0][1];\r\n  while (curIndex < points.length) {\r\n    // 1px 之内的偏差忽略\r\n    if (Math.abs(points[curIndex][0] - x) < 1) {\r\n      // 合并 1px 之内的偏差忽略\r\n      points[curIndex][0] = x;\r\n      equalsCountX++;\r\n    } else {\r\n      x = points[curIndex][0];\r\n      equalsCountX = 0;\r\n    }\r\n    if (Math.abs(points[curIndex][1] - y) < 1) {\r\n      points[curIndex][1] = y;\r\n      equalsCountY++;\r\n    } else {\r\n      y = points[curIndex][1];\r\n      equalsCountY = 0;\r\n    }\r\n    if (equalsCountX === 3 || equalsCountY === 3) {\r\n      points.splice(curIndex - 2, 2);\r\n      curIndex -= 2;\r\n      equalsCountX = 0;\r\n      equalsCountY = 0;\r\n      x = points[curIndex][0];\r\n      y = points[curIndex][1];\r\n    } else {\r\n      curIndex++;\r\n    }\r\n  }\r\n}\r\n\r\nexport { BasePolyline };\r\n","import { platformEnum } from \"../../enums\";\r\nimport { createSvgNode, extend, fixZrCoordinate } from \"../../helpers\";\r\nimport { BasePolyline } from \"../BasePolyline\";\r\nimport { createAnimateNode, makeAnimatePath } from \"./helpers\";\r\n\r\nfunction PolylineSvg(opts) {\r\n  BasePolyline.call(this, opts);\r\n}\r\n\r\nPolylineSvg.prototype = {\r\n  constructor: PolylineSvg,\r\n\r\n  platform: platformEnum.svg,\r\n\r\n  create() {\r\n    BasePolyline.prototype.create.call(this);\r\n\r\n    this.el = createSvgNode(\"g\");\r\n    this.el.style.cursor = \"pointer\";\r\n\r\n    this.polylineEl = createSvgNode(\"polyline\");\r\n\r\n    this.el.appendChild(this.polylineEl);\r\n\r\n    this.animateNode = createAnimateNode(this);\r\n    this.el.appendChild(this.animateNode);\r\n\r\n    this.mapToView();\r\n  },\r\n\r\n  mapToView() {\r\n    this.polylineEl.setAttribute(\r\n      \"points\",\r\n      fixCoordinate(this.points)\r\n        .map(d => d.join(\",\"))\r\n        .join(\" \")\r\n    );\r\n    this.polylineEl.setAttribute(\"stroke\", this.color);\r\n    this.polylineEl.setAttribute(\"stroke-width\", 1);\r\n    this.polylineEl.setAttribute(\"fill\", \"none\");\r\n\r\n    this.animateNode.setAttribute(\"cx\", this.points[0][0]);\r\n    this.animateNode.setAttribute(\"cy\", this.points[0][1]);\r\n    this.animateMotion.setAttribute(\"path\", makeAnimatePath(this));\r\n  }\r\n};\r\n\r\nextend(PolylineSvg, BasePolyline);\r\n\r\nfunction fixCoordinate(points) {\r\n  return points.map(([x, y]) => {\r\n    return [fixZrCoordinate(x), fixZrCoordinate(y)];\r\n  });\r\n}\r\n\r\nexport { PolylineSvg };\r\n","import { Element } from \"../../Element\";\r\nimport { createSvgNode, extend } from \"../../helpers\";\r\nimport { platformEnum, typeEnum } from \"../../enums\";\r\n\r\nfunction TextSvg(opts) {\r\n  Element.call(this, opts);\r\n}\r\n\r\nTextSvg.prototype = {\r\n  constructor: TextSvg,\r\n\r\n  type: typeEnum.text,\r\n\r\n  platform: platformEnum.svg,\r\n\r\n  text: \"文字\",\r\n\r\n  create() {\r\n    this.el = createSvgNode(\"text\");\r\n\r\n    this.tspan = createSvgNode(\"tspan\");\r\n\r\n    this.tspan.setAttribute(\"text-anchor\", \"middle\");\r\n    this.tspan.setAttribute(\"dominant-baseline\", \"middle\");\r\n\r\n    this.el.appendChild(this.tspan);\r\n\r\n    this.mapToView();\r\n  },\r\n\r\n  mapToView() {\r\n    const el = this.el;\r\n    el.setAttribute(\"x\", this.x);\r\n    el.setAttribute(\"y\", this.y);\r\n    this.tspan.textContent = this.text;\r\n    el.style.cursor = \"pointer\";\r\n  },\r\n\r\n  export() {\r\n    return {\r\n      ...Element.prototype.export.call(this),\r\n      text: this.text\r\n    };\r\n  }\r\n};\r\n\r\nextend(TextSvg, Element);\r\n\r\nexport { TextSvg };\r\n","import { typeEnum } from \"./enums\";\r\nimport { platformEnum } from \"./enums\";\r\nimport { makeMap } from \"./helpers\";\r\nimport { ArrowSvg } from \"./elements/impl/ArrowSvg\";\r\nimport { RectSvg } from \"./elements/impl/RectSvg\";\r\nimport { VertexSvg } from \"./elements/impl/VertexSvg\";\r\nimport { CircleSvg } from \"./elements/impl/CircleSvg\";\r\nimport { LineSvg } from \"./elements/impl/LineSvg\";\r\nimport { PolylineSvg } from \"./elements/impl/PolylineSvg\";\r\nimport { TextSvg } from \"./elements/impl/TextSvg\";\r\n\r\nconst implList = [\r\n  { type: typeEnum.rect, platform: platformEnum.svg, Constructor: RectSvg },\r\n  { type: typeEnum.polyline, platform: platformEnum.svg, Constructor: PolylineSvg },\r\n  { type: typeEnum.line, platform: platformEnum.svg, Constructor: LineSvg },\r\n  { type: typeEnum.circle, platform: platformEnum.svg, Constructor: CircleSvg },\r\n  { type: typeEnum.vertex, platform: platformEnum.svg, Constructor: VertexSvg },\r\n  { type: typeEnum.arrow, platform: platformEnum.svg, Constructor: ArrowSvg },\r\n  { type: typeEnum.text, platform: platformEnum.svg, Constructor: TextSvg }\r\n];\r\n\r\nconst typeConstructorMap = makeMap(implList, (map, item) => {\r\n  (map[item.type] || (map[item.type] = {}))[item.platform] = item;\r\n});\r\n\r\nexport function structRender(structure, { root, preview }) {\r\n  structure.elements.forEach(item => {\r\n    item.preview = preview;\r\n    createElement(item).mount(root);\r\n  });\r\n  root.flushRectLineRelation();\r\n}\r\n\r\nexport function createElement(opts) {\r\n  const element = new typeConstructorMap[opts.type][opts.platform].Constructor(opts);\r\n  opts.children?.forEach(opts => {\r\n    element.addChild(createElement(opts));\r\n  });\r\n  return element;\r\n}\r\n","import { fieldTypeEnum, platformEnum, typeEnum } from \"./enums\";\r\nimport { makeMap } from \"./helpers\";\r\n\r\nconst elementBaseItems = [\r\n  { prop: \"x\", label: \"x坐标\", type: fieldTypeEnum.number },\r\n  { prop: \"y\", label: \"y坐标\", type: fieldTypeEnum.number }\r\n];\r\n\r\nconst rectBaseItems = [\r\n  ...elementBaseItems,\r\n  { prop: \"width\", label: \"宽度\", type: fieldTypeEnum.number },\r\n  { prop: \"height\", label: \"高度\", type: fieldTypeEnum.number },\r\n  { prop: \"image\", label: \"背景图片\", type: fieldTypeEnum.text }\r\n];\r\n\r\nconst circleBaseItems = [\r\n  ...elementBaseItems,\r\n  { prop: \"r\", label: \"半径\", type: fieldTypeEnum.number },\r\n  { prop: \"image\", label: \"背景图片\", type: fieldTypeEnum.text }\r\n];\r\n\r\nconst lineBaseItems = [\r\n  {\r\n    prop: \"useArrow\",\r\n    label: \"箭头\",\r\n    type: fieldTypeEnum.select,\r\n    options: [\r\n      { label: \"是\", value: true },\r\n      { label: \"否\", value: false }\r\n    ]\r\n  }\r\n];\r\n\r\nconst textBaseItems = [...elementBaseItems, { prop: \"text\", label: \"文字\", type: fieldTypeEnum.text }];\r\n\r\nconst configurableList = [\r\n  {\r\n    type: typeEnum.rect,\r\n    platform: platformEnum.svg,\r\n    items: [...rectBaseItems]\r\n  },\r\n  {\r\n    type: typeEnum.polyline,\r\n    platform: platformEnum.svg,\r\n    items: [...lineBaseItems]\r\n  },\r\n  {\r\n    type: typeEnum.line,\r\n    platform: platformEnum.svg,\r\n    items: [...lineBaseItems]\r\n  },\r\n  {\r\n    type: typeEnum.circle,\r\n    platform: platformEnum.svg,\r\n    items: [...circleBaseItems]\r\n  },\r\n  {\r\n    type: typeEnum.text,\r\n    platform: platformEnum.svg,\r\n    items: [...textBaseItems]\r\n  }\r\n];\r\n\r\nexport const configurableMap = Object.freeze(\r\n  makeMap(configurableList, (map, item) => {\r\n    (map[item.type] || (map[item.type] = {}))[item.platform] = Object.freeze(item);\r\n  })\r\n);\r\n\r\nexport function makeConfiguration(items) {\r\n  return makeMap(items, (map, item) => {\r\n    let value = item.value;\r\n    if (item.type === fieldTypeEnum.number) {\r\n      value = Number(value);\r\n    }\r\n    map[item.prop] = value;\r\n  });\r\n}\r\n"],"sourceRoot":""}